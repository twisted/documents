<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>twisted.flow.flow : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>

    <span style="display: none" id="current-docs-container">
      <em>
        <a id="current-docs-link">
          Go to the latest version of this document.
        </a>
      </em>
    </span>

    <h1 class="module">t.f.flow : module documentation</h1>
    <p>
      <span id="part">Part of <a href="twisted.html">twisted</a>.<a href="twisted.flow.html">flow</a></span>
      <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.2.0/twisted/flow/flow.py">View Source</a>
      
    </p>
    <div>
      
    </div>
    <div><p>flow -- asynchronous data flows using generators</p>
<p>This module provides a mechanism for using async data flows through the 
use of generators.  The basic idea of flow is that when ever you require 
data from a producer, you yield the producer.  If the producer is ready, 
then you can call producer.next() to fetch the incoming data.  Otherwise, 
the underlying controller will suspend the operation to try again 
later.</p>
For example, here is a simple 'printer' which consumes items from its 
source by printing them.  Note that to get a new item, it first yields the 
data source and then calls source.next():
<pre class="literalblock">
   from __future__ import generators
   from twisted.flow import flow
   from twisted.internet import reactor, defer

   def printer(source):
       source = flow.wrap(source)
       while True:
           yield source
           print source.next()

   someFlowSource =  [&quot;one&quot;, flow.Cooperate(1), &quot;two&quot;]

   d = flow.Deferred(printer(someFlowSource))
   d.addCallback(lambda _: reactor.stop())
   reactor.run()
</pre>
In the example above, there are three objects imported from the flow 
module:
<pre class="literalblock">
  - flow.wrap converts many data sources such as lists, generators, and
    deferreds, into a special instruction object, a Stage.  In this case, a
    simple list is wrapped.

  - flow.Deferred is a flow Controller which executes the stage passed to it,
    aggregating all results into a list which is passed to the deferred's
    callback.  In this case, the result list is empty, but the callback is
    used to stop the reactor after the printing has finished.

  - flow.Cooperate is a special instruction object which is used by the flow
    Controller.  In this case, the the flow pauses for one second between &quot;one&quot;
    and &quot;two&quot;.
</pre>
<p>Most classes in the flow module an Instruction, either a CallLater or a 
Stage. A Stage instruction is used to wrap various sorts of producers, 
anything from a simple string to Callback functions.  Some stages can be 
constructed directly, such as Zip, Concurrent, Merge, Callback, or 
Threaded.  But in most cases, in particular _String, _List, _Iterable, and 
_Deferred, state construction is handled through the wrap function.  Stages
can yield other stages to build a processing chain, results which are 
returned to the previous stage, or a CallLater instruction which causes the
whole operation to be suspended.</p>
<p>Typically, the CallLater instructions as passed up the call stack till 
the top level, or Controller.  The controller then typically returns 
control, but registers itself to be called later.  Once called again, the 
controller sets up the call stack and resumes the top level generator.  
There is a special CallLater, Cooperate, which simply resumes the chain of 
stages at a later time. Some stages, Callback, _Deferred, and Threaded have
their own special CallLater which handles the process of resuming flow for 
their specific case.</p>
The inheritence hierarchy defined here looks like this:
<pre class="literalblock">
   Instruction
      CallLater
         Cooperate
      Stage
             # private stages (use flow.wrap)
         _String
         _List
         _Iterable
         _Deferred
             # public stages
         Map
            Zip
         Concurrent
            Merge
         Block
         Callback*
         Threaded*
   Controller
       Deferred
       Block
       Protocol
</pre>
<table class="fieldTable"></table></div>

    
    
    <div id="splitTables">
      
      
      
    </div>
    
    
    

    
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://twistedmatrix.com/">Twisted</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2011-10-27 16:02:37.
    </address>

    <!-- Google analytics, obviously. -->
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
    <script type="text/javascript">
      _uacct = "UA-99018-6";
      urchinTracker();
    </script>

    <!-- If the documentation isn't current, insert a current link. -->
    <script type="text/javascript">
      if (window.location.pathname.indexOf('/current/') == -1) {
          <!-- Give the user a link to this page, but in the current version of the docs. -->
          var link = document.getElementById('current-docs-link');
          link.href = window.location.pathname.replace(/\/\d+\.\d+\.\d+\/api\//, '/current/api/');
          <!-- And make it visible -->
          var container = document.getElementById('current-docs-container');
          container.style.display = "";
          delete link;
          delete container;
      }
    </script>

  </body>
</html>