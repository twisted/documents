<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>twisted.application.internet.ClientService : API documentation</title>

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
  </head>
  <body>

    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html">
            <a href="https://twistedmatrix.com/">Twisted</a> API Documentation
          </a>
        </div>
      </div>
    </nav>

    <div id="showPrivate">
      <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
    </div>

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><a href="twisted.html" class="code" data-type="Package">twisted</a>.<a href="twisted.application.html" class="code" data-type="Package">application</a>.<a href="twisted.application.internet.html" class="code" data-type="Module">internet</a>.<a href="twisted.application.internet.ClientService.html" class="code" data-type="Class">ClientService</a></code></h1>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> twisted.application.internet.ClientService(<a href="twisted.application.service.Service.html" class="code" data-type="Class">service.Service</a>): <a href="https://github.com/twisted/twisted/tree/release-21.2.0-10091
/src/twisted/application/internet.py#L1073">(source)</a></code></p>
        <p><a href="classIndex.html#twisted.application.internet.ClientService">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>A <a href="twisted.application.internet.ClientService.html"><code>ClientService</code></a> maintains a single outgoing connection to a client endpoint, reconnecting after a configurable timeout when a connection fails, either before or after connecting.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Present Since</td><td colspan="2">16.1.0</td></tr></table></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id91">
  
  <tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.application.internet.ClientService.html#__init__" class="code" data-type="Method">__init__</a></td>
    <td><span></span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.application.internet.ClientService.html#whenConnected" class="code" data-type="Method">whenConnected</a></td>
    <td><span>Retrieve the currently-connected <a href="twisted.internet.protocol.Protocol.html"><code>Protocol</code></a>, or the next one to connect.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.application.internet.ClientService.html#startService" class="code" data-type="Method">startService</a></td>
    <td><span>Start this <a href="twisted.application.internet.ClientService.html"><code>ClientService</code></a>, initiating the connection retry loop.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.application.internet.ClientService.html#stopService" class="code" data-type="Method">stopService</a></td>
    <td><span>Stop attempting to reconnect and close any existing connections.</span></td>
  </tr><tr class="classvariable private">
    
    <td>Class Variable</td>
    <td><a href="twisted.application.internet.ClientService.html#_log" class="code" data-type="Class Variable">_log</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><a href="twisted.application.internet.ClientService.html#_machine" class="code" data-type="Instance Variable">_machine</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <a href="twisted.application.service.Service.html" class="code" data-type="Class">Service</a>:
          </p>
          <table class="children sortable" id="id92">
  
  <tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.application.service.Service.html#running" class="code" data-type="Instance Variable">running</a></td>
    <td><span>A <code>boolean</code> which indicates whether the service is running.</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.application.service.Service.html#name" class="code" data-type="Instance Variable">name</a></td>
    <td><span>A <code>str</code> which is the name of the service or <code>None</code>.</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.application.service.Service.html#parent" class="code" data-type="Instance Variable">parent</a></td>
    <td><span>An <code>IServiceCollection</code> which is the parent or <code>None</code>.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="twisted.application.service.Service.html#__getstate__" class="code" data-type="Method">__getstate__</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="twisted.application.service.Service.html#setName" class="code" data-type="Method">setName</a></td>
    <td><span>Set the name of the service.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="twisted.application.service.Service.html#setServiceParent" class="code" data-type="Method">setServiceParent</a></td>
    <td><span>Set the parent of the service.  This method is responsible for setting the <code>parent</code> attribute on this service (the child service).</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="twisted.application.service.Service.html#disownServiceParent" class="code" data-type="Method">disownServiceParent</a></td>
    <td><span>Use this API to remove an <a href="twisted.application.service.IService.html"><code>IService</code></a> from an <a href="twisted.application.service.IServiceCollection.html"><code>IServiceCollection</code></a>.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="twisted.application.service.Service.html#privilegedStartService" class="code" data-type="Method">privilegedStartService</a></td>
    <td><span>Do preparation work for starting the service.</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="baseclassvariable private">
  
  <a name="twisted.application.internet.ClientService._log">
    
  </a>
  <a name="_log">
    
  </a>
  <div class="functionHeader">
    
    _log =
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/release-21.2.0-10091
/src/twisted/application/internet.py#L1082">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.application.internet.ClientService.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    def __init__(self, endpoint, factory, retryPolicy=None, clock=None, prepareConnection=None):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/release-21.2.0-10091
/src/twisted/application/internet.py#L1084">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">endpoint</td><td>A <a href="twisted.internet.interfaces.IStreamClientEndpoint.html"><code>stream client endpoint</code></a> provider which will be used to connect when the service starts.</td></tr><tr><td></td><td class="fieldArg">factory</td><td>A <a href="twisted.internet.interfaces.IProtocolFactory.html"><code>protocol factory</code></a> which will be used to create clients for the endpoint.</td></tr><tr><td></td><td class="fieldArg">retryPolicy</td><td>A policy configuring how long <a href="twisted.application.internet.ClientService.html"><code>ClientService</code></a> will wait between attempts to connect to <code>endpoint</code>. (type: callable taking (the number of failed connection attempts made in a row (<a href="https://docs.python.org/3/library/functions.html#int"><code>int</code></a>)) and returning the number of seconds to wait before making another attempt.)</td></tr><tr><td></td><td class="fieldArg">clock</td><td>The clock used to schedule reconnection.  It's mainly useful to be parametrized in tests.  If the factory is serialized, this attribute will not be serialized, and the default value (the reactor) will be restored when deserialized. (type: <a href="twisted.internet.interfaces.IReactorTime.html"><code>IReactorTime</code></a>)</td></tr><tr><td></td><td class="fieldArg">prepareConnection</td><td>A single argument <a href="https://docs.python.org/3/library/functions.html#callable"><code>callable</code></a> that may return a <a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a>. It will be called once with the <a href="twisted.internet.interfaces.IProtocol.html"><code>protocol</code></a> each time a new connection is made.  It may call methods on the protocol to prepare it for use (e.g. authenticate) or validate it (check its health).<p>The <code>prepareConnection</code> callable may raise an exception or return a <a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a> which fails to reject the connection.  A rejected connection is not used to fire an <a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a> returned by <a href="twisted.application.internet.ClientService.html#whenConnected"><code>whenConnected</code></a>.  Instead, <a href="twisted.application.internet.ClientService.html"><code>ClientService</code></a> handles the failure and continues as if the connection attempt were a failure (incrementing the counter passed to <code>retryPolicy</code>).</p><p><a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a>s returned by <a href="twisted.application.internet.ClientService.html#whenConnected"><code>whenConnected</code></a> will not fire until any <a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a> returned by the <code>prepareConnection</code> callable fire. Otherwise its successful return value is consumed, but ignored.</p><p>Present Since Twisted 18.7.0</p> (type: <a href="https://docs.python.org/3/library/functions.html#callable"><code>callable</code></a>)</td></tr></table></div>
  </div>
</div><div class="baseinstancevariable private">
  
  <a name="twisted.application.internet.ClientService._machine">
    
  </a>
  <a name="_machine">
    
  </a>
  <div class="functionHeader">
    
    _machine =
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/release-21.2.0-10091
/src/twisted/application/internet.py#L1133">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.application.internet.ClientService.whenConnected">
    
  </a>
  <a name="whenConnected">
    
  </a>
  <div class="functionHeader">
    
    def whenConnected(self, failAfterFailures=None):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/release-21.2.0-10091
/src/twisted/application/internet.py#L1142">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Retrieve the currently-connected <a href="twisted.internet.protocol.Protocol.html"><code>Protocol</code></a>, or the next one to connect.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">failAfterFailures</td><td>number of connection failures after which the Deferred will deliver a Failure (None means the Deferred will only fail if/when the service is stopped).  Set this to 1 to make the very first connection failure signal an error.  Use 2 to allow one failure but signal an error if the subsequent retry then fails. (type: <a href="https://docs.python.org/3/library/functions.html#int"><code>int</code></a> or None)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">a Deferred that fires with a protocol produced by the factory passed to <code>__init__</code> (type: <a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a> that may:<ul><li>fire with <a href="twisted.internet.interfaces.IProtocol.html"><code>IProtocol</code></a></li><li>fail with <a href="twisted.internet.defer.CancelledError.html"><code>CancelledError</code></a> when the service is stopped</li><li>fail with e.g. <a href="twisted.internet.error.DNSLookupError.html"><code>DNSLookupError</code></a> or <a href="twisted.internet.error.ConnectionRefusedError.html"><code>ConnectionRefusedError</code></a> when the number of consecutive failed connection attempts equals the value of "failAfterFailures"</li></ul>)</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.application.internet.ClientService.startService">
    
  </a>
  <a name="startService">
    
  </a>
  <div class="functionHeader">
    
    def startService(self):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/release-21.2.0-10091
/src/twisted/application/internet.py#L1171">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <a href="twisted.application.service.IService.html#startService" class="code" data-type="Method">twisted.application.service.IService</a></div><div class="interfaceinfo">overrides <a href="twisted.application.service.Service.html#startService" class="code" data-type="Method">twisted.application.service.Service.startService</a></div>
    
    <div><p>Start this <a href="twisted.application.internet.ClientService.html"><code>ClientService</code></a>, initiating the connection retry loop.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.application.internet.ClientService.stopService">
    
  </a>
  <a name="stopService">
    
  </a>
  <div class="functionHeader">
    
    def stopService(self):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/release-21.2.0-10091
/src/twisted/application/internet.py#L1181">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <a href="twisted.application.service.IService.html#stopService" class="code" data-type="Method">twisted.application.service.IService</a></div><div class="interfaceinfo">overrides <a href="twisted.application.service.Service.html#stopService" class="code" data-type="Method">twisted.application.service.Service.stopService</a></div>
    
    <div><p>Stop attempting to reconnect and close any existing connections.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">a <a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a> that fires when all outstanding connections are closed and all in-progress connection attempts halted.</td></tr></table></div>
  </div>
</div>

      </div>
      <address>
        <a href="index.html">API Documentation</a> for <a href="https://twistedmatrix.com/">Twisted</a>, generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a> 20.12.1 at 2021-02-28 19:53:36.
      </address>

    </div>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>