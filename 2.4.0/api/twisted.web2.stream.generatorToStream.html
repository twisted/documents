<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>API docs for &ldquo;twisted.web2.stream.generatorToStream&rdquo;</title>
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <h1 class="function">Function t.w.s.generatorToStream(fun):</h1>
    <p>
      <span id="part">Part of <a href="twisted.web2.stream.html">twisted.web2.stream</a></span>
      <a></a>
      <a></a>
    </p>
    <div></div>
    <div><p>Converts a generator function into a stream.</p>
<p>The function should take an iterator as its first argument, which will 
be converted *from* a stream by this wrapper, and yield items which are 
turned *into* the results from the stream's 'read' call.</p>
One important point: before every call to input.next(), you *MUST* do 
a &quot;yield input.wait&quot; first. Yielding this magic value takes 
care of ensuring that the input is not a deferred before you see it.
<pre class="doctestblock">
<span class="py-src"><span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> twisted.web2 <span class="py-keyword">import</span> stream
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> string <span class="py-keyword">import</span> maketrans
<span class="py-prompt">&gt;&gt;&gt; </span>alphabet = <span class="py-string">'abcdefghijklmnopqrstuvwxyz'</span>
<span class="py-prompt">&gt;&gt;&gt;
</span><span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">def</span> encrypt(input, key):
<span class="py-prompt">... </span>    code = alphabet[key:] + alphabet[:key]
<span class="py-prompt">... </span>    translator = maketrans(alphabet+alphabet.upper(), code+code.upper())
<span class="py-prompt">... </span>    yield input.wait
<span class="py-prompt">... </span>    <span class="py-keyword">for</span> s <span class="py-keyword">in</span> input:
<span class="py-prompt">... </span>        yield str(s).translate(translator)
<span class="py-prompt">... </span>        yield input.wait
<span class="py-prompt">...
</span><span class="py-prompt">&gt;&gt;&gt; </span>encrypt = stream.generatorToStream(encrypt)
<span class="py-prompt">&gt;&gt;&gt;
</span><span class="py-prompt">&gt;&gt;&gt; </span>plaintextStream = stream.MemoryStream(<span class="py-string">'SampleSampleSample'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>encryptedStream = encrypt(plaintextStream, 13)
<span class="py-prompt">&gt;&gt;&gt; </span>encryptedStream.read()</span>
<span class="py-output">'FnzcyrFnzcyrFnzcyr'</span>

<span class="py-src"><span class="py-prompt">&gt;&gt;&gt;
</span><span class="py-prompt">&gt;&gt;&gt; </span>plaintextStream = stream.MemoryStream(<span class="py-string">'SampleSampleSample'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>encryptedStream = encrypt(plaintextStream, 13)
<span class="py-prompt">&gt;&gt;&gt; </span>evenMoreEncryptedStream = encrypt(encryptedStream, 13)
<span class="py-prompt">&gt;&gt;&gt; </span>evenMoreEncryptedStream.read()</span>
<span class="py-output">'SampleSampleSample'</span></pre>
<table class="fieldTable"></table></div>
    
      <table class="children"><tr class="function">
          <td>Function</td>
          <td><a href="twisted.web2.stream.generatorToStream.generatorToStream_inner.html">generatorToStream_inner</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr></table>
    
    
        
  </body>
</html>