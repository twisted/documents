<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>API docs for &ldquo;twisted.enterprise.sqlreflector.SQLReflector&rdquo;</title>
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <h1 class="class">Class t.e.s.SQLReflector(<a href="twisted.enterprise.reflector.Reflector.html">reflector.Reflector</a>):</h1>
    <p>
      <span id="part">Part of <a href="twisted.enterprise.sqlreflector.html">twisted.enterprise.sqlreflector</a></span>
      <a></a>
      <a href="classIndex.html#twisted.enterprise.sqlreflector.SQLReflector">View In Hierarchy</a>
    </p>
    <div></div>
    <div><p>I reflect on a database and load RowObjects from it.</p>
In order to do this, I interrogate a relational database to extract 
schema information and interface with RowObject class objects that can 
interact with specific tables.
<table class="fieldTable"></table></div>
    
      <table class="children"><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.__init__">__init__</a></td>
          <td><span>Initialize me against a database.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector._populate">_populate</a></td>
          <td><span>Implement me to populate schema information for the reflector.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector._transPopulateSchema">_transPopulateSchema</a></td>
          <td><span>Used to construct the row classes in a single interaction.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector._populateSchemaFor">_populateSchemaFor</a></td>
          <td><span>Construct all the SQL templates for database operations on
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.escape_string">escape_string</a></td>
          <td><span>Escape a string for use in an SQL statement. The default
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.quote_value">quote_value</a></td>
          <td><span>Format a value for use in an SQL statement.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.loadObjectsFrom">loadObjectsFrom</a></td>
          <td><span>Load a set of RowObjects from a database.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector._rowLoader">_rowLoader</a></td>
          <td><span>immediate loading of rowobjects from the table with the 
whereClause.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.findTypeFor">findTypeFor</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.buildUpdateSQL">buildUpdateSQL</a></td>
          <td><span>(Internal) Build SQL template to update a RowObject.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.buildInsertSQL">buildInsertSQL</a></td>
          <td><span>(Internal) Build SQL template to insert a new row.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.buildDeleteSQL">buildDeleteSQL</a></td>
          <td><span>Build the SQL template to delete a row from the table.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.updateRowSQL">updateRowSQL</a></td>
          <td><span>Build SQL to update the contents of rowObject.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.updateRow">updateRow</a></td>
          <td><span>Update the contents of rowObject to the database.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.insertRowSQL">insertRowSQL</a></td>
          <td><span>Build SQL to insert the contents of rowObject.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.insertRow">insertRow</a></td>
          <td><span>Insert a new row for rowObject.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.deleteRowSQL">deleteRowSQL</a></td>
          <td><span>Build SQL to delete rowObject from the database.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.enterprise.sqlreflector.SQLReflector.deleteRow">deleteRow</a></td>
          <td><span>Delete the row for rowObject from the database.
</span></td>
        </tr></table>
    
    
        <p>
          Inherited from <span><a href="twisted.enterprise.reflector.Reflector.html">Reflector</a></span>:
        </p>
        <table class="children"><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.__getstate__">__getstate__</a></td>
            <td><span class="undocumented">Undocumented</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.__setstate__">__setstate__</a></td>
            <td><span class="undocumented">Undocumented</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.populateSchemaFor">populateSchemaFor</a></td>
            <td><span>This is called once for each registered rowClass to add it
</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.getTableInfo">getTableInfo</a></td>
            <td><span>Get a TableInfo record about a particular instance.
</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.buildWhereClause">buildWhereClause</a></td>
            <td><span>util method used by reflectors. builds a where clause to link a row to 
another table.
</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.addToParent">addToParent</a></td>
            <td><span>util method used by reflectors. adds these rows to the parent row 
object.
</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.addToCache">addToCache</a></td>
            <td><span>NOTE: Should this be recursive?! requires better container 
knowledge...
</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.findInCache">findInCache</a></td>
            <td><span class="undocumented">Undocumented</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.removeFromCache">removeFromCache</a></td>
            <td><span>NOTE: should this be recursive!??
</span></td>
          </tr></table>
      
    <div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.__init__"></a>
        <div class="functionHeader">
          def <span>__init__(self, dbpool, rowClasses):</span>
        </div>
        <div class="functionBody"><div class="interfaceinfo">overrides <a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.__init__">twisted.enterprise.reflector.Reflector.__init__</a></div><div>Initialize me against a database.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector._populate"></a>
        <div class="functionHeader">
          def <span>_populate(self):</span>
        </div>
        <div class="functionBody"><div class="interfaceinfo">overrides <a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector._populate">twisted.enterprise.reflector.Reflector._populate</a></div><div>Implement me to populate schema information for the reflector.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector._transPopulateSchema"></a>
        <div class="functionHeader">
          def <span>_transPopulateSchema(self):</span>
        </div>
        <div class="functionBody"><div>Used to construct the row classes in a single interaction.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector._populateSchemaFor"></a>
        <div class="functionHeader">
          def <span>_populateSchemaFor(self, rc):</span>
        </div>
        <div class="functionBody"><div>Construct all the SQL templates for database operations on 
&lt;tableName&gt; and populate the class &lt;rowClass&gt; with that 
info.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.escape_string"></a>
        <div class="functionHeader">
          def <span>escape_string(self, text):</span>
        </div>
        <div class="functionBody"><div>Escape a string for use in an SQL statement. The default 
implementation escapes ' with '' and \ with \. Redefine this function in 
a subclass if your database server uses different escaping rules.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.quote_value"></a>
        <div class="functionHeader">
          def <span>quote_value(self, value, type):</span>
        </div>
        <div class="functionBody"><div>Format a value for use in an SQL statement.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">value</td><td>a value to format as data in SQL.
</td></tr><tr><td></td><td class="fieldArg">type</td><td>a key in util.dbTypeMap.
</td></tr></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.loadObjectsFrom"></a>
        <div class="functionHeader">
          def <span>loadObjectsFrom(self, tableName, parentRow=None, data=None, whereClause=None, forceChildren=0):</span>
        </div>
        <div class="functionBody"><div class="interfaceinfo">overrides <a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.loadObjectsFrom">twisted.enterprise.reflector.Reflector.loadObjectsFrom</a></div><div><p>Load a set of RowObjects from a database.</p>
Create a set of python objects of &lt;rowClass&gt; from the contents 
of a table populated with appropriate data members. Example:
<pre class="literalblock">
 |  class EmployeeRow(row.RowObject):
 |      pass
 |
 |  def gotEmployees(employees):
 |      for emp in employees:
 |          emp.manager = &quot;fred smith&quot;
 |          manager.updateRow(emp)
 |
 |  reflector.loadObjectsFrom(&quot;employee&quot;,
 |                          data = userData,
 |                          whereClause = [(&quot;manager&quot; , EQUAL, &quot;fred smith&quot;)]
 |                          ).addCallback(gotEmployees)
</pre>
NOTE: the objects and all children should be loaded in a single 
transaction. NOTE: can specify a parentRow _OR_ a whereClause.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector._rowLoader"></a>
        <div class="functionHeader">
          def <span>_rowLoader(self, transaction, tableName, parentRow, data, whereClause, forceChildren):</span>
        </div>
        <div class="functionBody"><div>immediate loading of rowobjects from the table with the 
whereClause.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.findTypeFor"></a>
        <div class="functionHeader">
          def <span>findTypeFor(self, tableName, columnName):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.buildUpdateSQL"></a>
        <div class="functionHeader">
          def <span>buildUpdateSQL(self, tableInfo):</span>
        </div>
        <div class="functionBody"><div><p>(Internal) Build SQL template to update a RowObject.</p>
Returns: SQL that is used to contruct a rowObject class.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.buildInsertSQL"></a>
        <div class="functionHeader">
          def <span>buildInsertSQL(self, tableInfo):</span>
        </div>
        <div class="functionBody"><div><p>(Internal) Build SQL template to insert a new row.</p>
Returns: SQL that is used to insert a new row for a rowObject instance 
not created from the database.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.buildDeleteSQL"></a>
        <div class="functionHeader">
          def <span>buildDeleteSQL(self, tableInfo):</span>
        </div>
        <div class="functionBody"><div>Build the SQL template to delete a row from the table.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.updateRowSQL"></a>
        <div class="functionHeader">
          def <span>updateRowSQL(self, rowObject):</span>
        </div>
        <div class="functionBody"><div>Build SQL to update the contents of rowObject.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.updateRow"></a>
        <div class="functionHeader">
          def <span>updateRow(self, rowObject):</span>
        </div>
        <div class="functionBody"><div class="interfaceinfo">overrides <a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.updateRow">twisted.enterprise.reflector.Reflector.updateRow</a></div><div>Update the contents of rowObject to the database.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.insertRowSQL"></a>
        <div class="functionHeader">
          def <span>insertRowSQL(self, rowObject):</span>
        </div>
        <div class="functionBody"><div>Build SQL to insert the contents of rowObject.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.insertRow"></a>
        <div class="functionHeader">
          def <span>insertRow(self, rowObject):</span>
        </div>
        <div class="functionBody"><div class="interfaceinfo">overrides <a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.insertRow">twisted.enterprise.reflector.Reflector.insertRow</a></div><div>Insert a new row for rowObject.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.deleteRowSQL"></a>
        <div class="functionHeader">
          def <span>deleteRowSQL(self, rowObject):</span>
        </div>
        <div class="functionBody"><div>Build SQL to delete rowObject from the database.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.enterprise.sqlreflector.SQLReflector.deleteRow"></a>
        <div class="functionHeader">
          def <span>deleteRow(self, rowObject):</span>
        </div>
        <div class="functionBody"><div class="interfaceinfo">overrides <a href="twisted.enterprise.reflector.Reflector.html#twisted.enterprise.reflector.Reflector.deleteRow">twisted.enterprise.reflector.Reflector.deleteRow</a></div><div>Delete the row for rowObject from the database.
<table class="fieldTable"></table></div></div>
      </div>    
  </body>
</html>