<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>API docs for &ldquo;twisted.internet.process.Process&rdquo;</title>
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <h1 class="class">Class t.i.p.Process(<a href="twisted.persisted.styles.Ephemeral.html">styles.Ephemeral</a>):</h1>
    <p>
      <span id="part">Part of <a href="twisted.internet.process.html">twisted.internet.process</a></span>
      <a></a>
      <a href="classIndex.html#twisted.internet.process.Process">View In Hierarchy</a>
    </p>
    <div></div>
    <div><p>An operating-system Process.</p>
<p>This represents an operating-system process with arbitrary 
input/output pipes connected to it. Those pipes may represent standard 
input, standard output, and standard error, or any other file 
descriptor.</p>
On UNIX, this is implemented using fork(), exec(), pipe() and fcntl(). 
These calls may not exist elsewhere so this code is not cross-platform. 
(also, windows can only select on sockets...)
<table class="fieldTable"></table></div>
    
      <table class="children"><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.__init__">__init__</a></td>
          <td><span>Spawn an operating-system process.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process._setupChild">_setupChild</a></td>
          <td><span>fdmap[childFD] = parentFD
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process._execChild">_execChild</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.reapProcess">reapProcess</a></td>
          <td><span>Try to reap a process (without blocking) via waitpid.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.writeToChild">writeToChild</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.closeChildFD">closeChildFD</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.pauseProducing">pauseProducing</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.resumeProducing">resumeProducing</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.closeStdin">closeStdin</a></td>
          <td><span>Call this to close standard input on this process.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.closeStdout">closeStdout</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.closeStderr">closeStderr</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.loseConnection">loseConnection</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.write">write</a></td>
          <td><span>Call this to write to standard input on this process.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.registerProducer">registerProducer</a></td>
          <td><span>Call this to register producer for standard input.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.unregisterProducer">unregisterProducer</a></td>
          <td><span>Call this to unregister producer for standard input.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.writeSequence">writeSequence</a></td>
          <td><span>Call this to write to standard input on this process.
</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.childDataReceived">childDataReceived</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.signalProcess">signalProcess</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.processEnded">processEnded</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.childConnectionLost">childConnectionLost</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.maybeCallProcessEnded">maybeCallProcessEnded</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr><tr class="function">
          <td>Method</td>
          <td><a href="#twisted.internet.process.Process.__repr__">__repr__</a></td>
          <td><span class="undocumented">Undocumented</span></td>
        </tr></table>
    
    
        <p>
          Inherited from <span><a href="twisted.persisted.styles.Ephemeral.html">Ephemeral</a></span>:
        </p>
        <table class="children"><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.persisted.styles.Ephemeral.html#twisted.persisted.styles.Ephemeral.__getstate__">__getstate__</a></td>
            <td><span class="undocumented">Undocumented</span></td>
          </tr><tr class="basefunction">
            <td>Method</td>
            <td><a href="twisted.persisted.styles.Ephemeral.html#twisted.persisted.styles.Ephemeral.__setstate__">__setstate__</a></td>
            <td><span class="undocumented">Undocumented</span></td>
          </tr></table>
      
    <div class="function">
        <a name="twisted.internet.process.Process.__init__"></a>
        <div class="functionHeader">
          def <span>__init__(self, reactor, command, args, environment, path, proto, uid=None, gid=None, childFDs=None):</span>
        </div>
        <div class="functionBody"><div><p>Spawn an operating-system process.</p>
<p>This is where the hard work of disconnecting all currently open files 
/ forking / executing the new process happens. (This is executed 
automatically when a Process is instantiated.)</p>
This will also run the subprocess as a given user ID and group ID, if 
specified. (Implementation Note: this doesn't support all the arcane 
nuances of setXXuid on UNIX: it will assume that either your effective or 
real UID is 0.)
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">childFDs</td><td><p>a dictionary mapping fd_in_child to current_fd_in_parent/'r'/'w'.</p>
<p>If the value is a number, it specifies one of the parent's fds that 
will be remapped to the child's fd. This is useful for things like inetd 
and shell-like file redirection.</p>
<p>If it is the string 'r', a pipe will be created and attached to the 
child at that fd number, and the parent will be able to read from the 
pipe. This is useful for the child's stdout and stderr.</p>
<p>If it is the string 'w', a pipe will be created and attached, and the 
parent will be able to write into that pipe. This is useful for the 
child's stdin.</p>
If childFDs is not passed, the default behaviour is to use a mapping 
that opens the usual stdin/stdout/stderr pipes.
</td></tr></table></div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process._setupChild"></a>
        <div class="functionHeader">
          def <span>_setupChild(self, fdmap):</span>
        </div>
        <div class="functionBody"><div><p>fdmap[childFD] = parentFD</p>
<p>The child wants to end up with 'childFD' attached to what used to be 
the parent's parentFD. As an example, a bash command run like 'command 
2&gt;&amp;1' would correspond to an fdmap of {0:0, 1:1, 2:1}. 'command 
&gt;foo.txt' would be {0:0, 1:os.open('foo.txt'), 2:2}.</p>
This is accomplished in two steps:
<pre class="literalblock">
   1. close all file descriptors that aren't values of fdmap.  This means
      0 .. maxfds.

   2. for each childFD::

        - if fdmap[childFD] == childFD, the descriptor is already in
          place.  Make sure the CLOEXEC flag is not set, then delete the
          entry from fdmap.

        - if childFD is in fdmap.values(), then the target descriptor is
          busy. Use os.dup() to move it elsewhere, update all
          fdmap[childFD] items that point to it, then close the
          original. Then fall through to the next case.

        - now fdmap[childFD] is not in fdmap.values(), and is free. Use
          os.dup2() to move it to the right place, then close the
          original.
</pre>
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process._execChild"></a>
        <div class="functionHeader">
          def <span>_execChild(self, path, settingUID, uid, gid, command, args, environment):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.reapProcess"></a>
        <div class="functionHeader">
          def <span>reapProcess(self):</span>
        </div>
        <div class="functionBody"><div><p>Try to reap a process (without blocking) via waitpid.</p>
<p>This is called when sigchild is caught or a Process object loses its 
&quot;connection&quot; (stdout is closed) This ought to result in reaping 
all zombie processes, since it will be called twice as often as it needs 
to be.</p>
(Unfortunately, this is a slightly experimental approach, since UNIX 
has no way to be really sure that your process is going to go away w/o 
blocking. I don't want to block.)
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.writeToChild"></a>
        <div class="functionHeader">
          def <span>writeToChild(self, childFD, data):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.closeChildFD"></a>
        <div class="functionHeader">
          def <span>closeChildFD(self, childFD):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.pauseProducing"></a>
        <div class="functionHeader">
          def <span>pauseProducing(self):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.resumeProducing"></a>
        <div class="functionHeader">
          def <span>resumeProducing(self):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.closeStdin"></a>
        <div class="functionHeader">
          def <span>closeStdin(self):</span>
        </div>
        <div class="functionBody"><div>Call this to close standard input on this process.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.closeStdout"></a>
        <div class="functionHeader">
          def <span>closeStdout(self):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.closeStderr"></a>
        <div class="functionHeader">
          def <span>closeStderr(self):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.loseConnection"></a>
        <div class="functionHeader">
          def <span>loseConnection(self):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.write"></a>
        <div class="functionHeader">
          def <span>write(self, data):</span>
        </div>
        <div class="functionBody"><div><p>Call this to write to standard input on this process.</p>
NOTE: This will silently lose data if there is no standard input.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.registerProducer"></a>
        <div class="functionHeader">
          def <span>registerProducer(self, producer, streaming):</span>
        </div>
        <div class="functionBody"><div><p>Call this to register producer for standard input.</p>
If there is no standard input producer.stopProducing() will be called 
immediately.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.unregisterProducer"></a>
        <div class="functionHeader">
          def <span>unregisterProducer(self):</span>
        </div>
        <div class="functionBody"><div>Call this to unregister producer for standard input.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.writeSequence"></a>
        <div class="functionHeader">
          def <span>writeSequence(self, seq):</span>
        </div>
        <div class="functionBody"><div><p>Call this to write to standard input on this process.</p>
NOTE: This will silently lose data if there is no standard input.
<table class="fieldTable"></table></div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.childDataReceived"></a>
        <div class="functionHeader">
          def <span>childDataReceived(self, name, data):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.signalProcess"></a>
        <div class="functionHeader">
          def <span>signalProcess(self, signalID):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.processEnded"></a>
        <div class="functionHeader">
          def <span>processEnded(self, status):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.childConnectionLost"></a>
        <div class="functionHeader">
          def <span>childConnectionLost(self, childFD, reason):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.maybeCallProcessEnded"></a>
        <div class="functionHeader">
          def <span>maybeCallProcessEnded(self):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div><div class="function">
        <a name="twisted.internet.process.Process.__repr__"></a>
        <div class="functionHeader">
          def <span>__repr__(self):</span>
        </div>
        <div class="functionBody"><div class="undocumented">Undocumented</div></div>
      </div>    
  </body>
</html>