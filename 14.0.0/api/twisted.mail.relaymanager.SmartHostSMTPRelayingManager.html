<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>twisted.mail.relaymanager.SmartHostSMTPRelayingManager : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>

    <span style="display: none" id="current-docs-container">
      <em>
        <a id="current-docs-link">
          Go to the latest version of this document.
        </a>
      </em>
    </span>

    <h1 class="class">t.m.r.SmartHostSMTPRelayingManager : class documentation</h1>
    <p>
      <span id="part">Part of <a href="twisted.html">twisted</a>.<a href="twisted.mail.html">mail</a>.<a href="twisted.mail.relaymanager.html">relaymanager</a></span>
      <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-14.0.0/twisted/mail/relaymanager.py#L584">View Source</a>
      <a href="classIndex.html#twisted.mail.relaymanager.SmartHostSMTPRelayingManager">View In Hierarchy</a>
    </p>
    <div>
      <p>Known subclasses: <a href="twisted.mail.relaymanager.SmartHostESMTPRelayingManager.html">twisted.mail.relaymanager.SmartHostESMTPRelayingManager</a></p>
    </div>
    <div>A smart host which uses SMTP managed relayers to send messages from the 
relay queue.</p>
<p><a 
href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#checkState"><code>checkState</code></a>
must be called periodically at which time the state of the relay queue is 
checked and new relayers are created as needed.</p>
<p>In order to relay a set of messages to a mail exchange server, a smart 
host creates an attempt manager and a managed relayer factory for that set 
of messages.  When a connection is made with the mail exchange server, the 
managed relayer factory creates a managed relayer to send the messages. The
managed relayer reports on its progress to the attempt manager which, in 
turn, updates the smart host's relay queue and information about its 
managed relayers.<table class="fieldTable"></table></div>

    
    
    <div id="splitTables">
      <table class="children sortable" id="id1518">
  
  
<tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#queue">queue</a></td>
    <td>See <a 
href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__init__"><code>__init__</code></a>.</td>
  </tr><tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#maxConnections">maxConnections</a></td>
    <td>See <a 
href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__init__"><code>__init__</code></a>.</td>
  </tr><tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#maxMessagesPerConnection">maxMessagesPerConnection</a></td>
    <td>See <a 
href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__init__"><code>__init__</code></a>.</td>
  </tr><tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#fArgs">fArgs</a></td>
    <td>Positional arguments for <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html#__init__"><code>SMTPManagedRelayerFactory.__init__</code></a>. (type: 3-<a 
href="http://docs.python.org/library/functions.html#tuple"><code>tuple</code></a>
of (0) <a 
href="http://docs.python.org/library/functions.html#list"><code>list</code></a>
of <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>,
(1) <a 
href="twisted.mail.relaymanager._AttemptManager.html"><code>_AttemptManager</code></a>,
(2) <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>
or 4-<a 
href="http://docs.python.org/library/functions.html#tuple"><code>tuple</code></a>
of (0) <a 
href="http://docs.python.org/library/functions.html#list"><code>list</code></a>
of <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>,
(1) <a 
href="twisted.mail.relaymanager._AttemptManager.html"><code>_AttemptManager</code></a>,
(2) <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>,
(3) <a 
href="http://docs.python.org/library/functions.html#int"><code>int</code></a>)</td>
  </tr><tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#fKwArgs">fKwArgs</a></td>
    <td>Keyword arguments for <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html#__init__"><code>SMTPManagedRelayerFactory.__init__</code></a>. (type: <a href="twisted.protocols.dict.html"><code>dict</code></a>)</td>
  </tr><tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#factory">factory</a></td>
    <td>A callable which creates a factory for creating a managed relayer. See <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html#__init__"><code>SMTPManagedRelayerFactory.__init__</code></a>
for parameters to the callable. (type: callable which returns <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html"><code>SMTPManagedRelayerFactory</code></a>)</td>
  </tr><tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#PORT">PORT</a></td>
    <td>The port over which to connect to the SMTP server. (type: <a 
href="http://docs.python.org/library/functions.html#int"><code>int</code></a>)</td>
  </tr><tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#mxcalc">mxcalc</a></td>
    <td>A resource for mail exchange host lookups. (type: <a 
href="http://docs.python.org/library/types.html#types.NoneType"><code>NoneType</code></a>
or <a 
href="twisted.mail.relaymanager.MXCalculator.html"><code>MXCalculator</code></a>)</td>
  </tr><tr class="instancevariable">
    
    
    <td>Instance Variable</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#managed">managed</a></td>
    <td>A mapping of factory for a managed relayer to filenames of messages the 
managed relayer is responsible for. (type: <a href="twisted.protocols.dict.html"><code>dict</code></a> mapping <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html"><code>SMTPManagedRelayerFactory</code></a>
to <a 
href="http://docs.python.org/library/functions.html#list"><code>list</code></a>
of <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>)</td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__init__">__init__</a></td>
    <td><span>Initialize a smart host.</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__getstate__">__getstate__</a></td>
    <td><span>Create a representation of the non-volatile state of this object.</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__setstate__">__setstate__</a></td>
    <td><span>Restore the non-volatile state of this object and recreate the volatile 
state.</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#checkState">checkState</a></td>
    <td><span>Check the state of the relay queue and, if possible, launch relayers to 
handle waiting messages.</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#_checkStateMX">_checkStateMX</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#_cbExchange">_cbExchange</a></td>
    <td><span>Initiate a connection with a mail exchange server.</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#_ebExchange">_ebExchange</a></td>
    <td><span>Set up to resend messages later.</span></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    

    <div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.queue">
    
  </a>
  <a name="queue">
    
  </a>
  <div class="functionHeader">
    queue =
  </div>
  <div class="functionBody">
    See <a 
href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__init__"><code>__init__</code></a>.
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.maxConnections">
    
  </a>
  <a name="maxConnections">
    
  </a>
  <div class="functionHeader">
    maxConnections =
  </div>
  <div class="functionBody">
    See <a 
href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__init__"><code>__init__</code></a>.
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.maxMessagesPerConnection">
    
  </a>
  <a name="maxMessagesPerConnection">
    
  </a>
  <div class="functionHeader">
    maxMessagesPerConnection =
  </div>
  <div class="functionBody">
    See <a 
href="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.html#__init__"><code>__init__</code></a>.
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.fArgs">
    
  </a>
  <a name="fArgs">
    
  </a>
  <div class="functionHeader">
    fArgs =
  </div>
  <div class="functionBody">
    Positional arguments for <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html#__init__"><code>SMTPManagedRelayerFactory.__init__</code></a>. (type: 3-<a 
href="http://docs.python.org/library/functions.html#tuple"><code>tuple</code></a>
of (0) <a 
href="http://docs.python.org/library/functions.html#list"><code>list</code></a>
of <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>,
(1) <a 
href="twisted.mail.relaymanager._AttemptManager.html"><code>_AttemptManager</code></a>,
(2) <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>
or 4-<a 
href="http://docs.python.org/library/functions.html#tuple"><code>tuple</code></a>
of (0) <a 
href="http://docs.python.org/library/functions.html#list"><code>list</code></a>
of <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>,
(1) <a 
href="twisted.mail.relaymanager._AttemptManager.html"><code>_AttemptManager</code></a>,
(2) <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>,
(3) <a 
href="http://docs.python.org/library/functions.html#int"><code>int</code></a>)
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.fKwArgs">
    
  </a>
  <a name="fKwArgs">
    
  </a>
  <div class="functionHeader">
    fKwArgs =
  </div>
  <div class="functionBody">
    Keyword arguments for <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html#__init__"><code>SMTPManagedRelayerFactory.__init__</code></a>. (type: <a href="twisted.protocols.dict.html"><code>dict</code></a>)
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.factory">
    
  </a>
  <a name="factory">
    
  </a>
  <div class="functionHeader">
    factory =
  </div>
  <div class="functionBody">
    A callable which creates a factory for creating a managed relayer. See <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html#__init__"><code>SMTPManagedRelayerFactory.__init__</code></a>
for parameters to the callable. (type: callable which returns <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html"><code>SMTPManagedRelayerFactory</code></a>)
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.PORT">
    
  </a>
  <a name="PORT">
    
  </a>
  <div class="functionHeader">
    PORT =
  </div>
  <div class="functionBody">
    The port over which to connect to the SMTP server. (type: <a 
href="http://docs.python.org/library/functions.html#int"><code>int</code></a>)
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.mxcalc">
    
  </a>
  <a name="mxcalc">
    
  </a>
  <div class="functionHeader">
    mxcalc =
  </div>
  <div class="functionBody">
    A resource for mail exchange host lookups. (type: <a 
href="http://docs.python.org/library/types.html#types.NoneType"><code>NoneType</code></a>
or <a 
href="twisted.mail.relaymanager.MXCalculator.html"><code>MXCalculator</code></a>)
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.managed">
    
  </a>
  <a name="managed">
    
  </a>
  <div class="functionHeader">
    managed =
  </div>
  <div class="functionBody">
    A mapping of factory for a managed relayer to filenames of messages the 
managed relayer is responsible for. (type: <a href="twisted.protocols.dict.html"><code>dict</code></a> mapping <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html"><code>SMTPManagedRelayerFactory</code></a>
to <a 
href="http://docs.python.org/library/functions.html#list"><code>list</code></a>
of <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>)
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    def
    __init__(self, queue, maxConnections=2, maxMessagesPerConnection=10):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-14.0.0/twisted/mail/relaymanager.py#L635" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Initialize a smart host.</p>
<p>The default values specify connection limits appropriate for a 
low-volume smart host.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">queue</td><td>A relay queue. (type: <a href="twisted.mail.relaymanager.Queue.html"><code>Queue</code></a>)</td></tr><tr><td></td><td class="fieldArg">maxConnections</td><td>The maximum number of concurrent connections to SMTP servers. (type: <a 
href="http://docs.python.org/library/functions.html#int"><code>int</code></a>)</td></tr><tr><td></td><td class="fieldArg">maxMessagesPerConnection</td><td>The maximum number of messages for which a relayer will be given 
responsibility. (type: <a 
href="http://docs.python.org/library/functions.html#int"><code>int</code></a>)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.__getstate__">
    
  </a>
  <a name="__getstate__">
    
  </a>
  <div class="functionHeader">
    
    def
    __getstate__(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-14.0.0/twisted/mail/relaymanager.py#L661" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Create a representation of the non-volatile state of this object.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">The non-volatile state of the queue. (type: <a href="twisted.protocols.dict.html"><code>dict</code></a> mapping <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>
to <a 
href="http://docs.python.org/library/functions.html#object"><code>object</code></a>)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.__setstate__">
    
  </a>
  <a name="__setstate__">
    
  </a>
  <div class="functionHeader">
    
    def
    __setstate__(self, state):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-14.0.0/twisted/mail/relaymanager.py#L673" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Restore the non-volatile state of this object and recreate the volatile 
state.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">state</td><td>The non-volatile state of the queue. (type: <a href="twisted.protocols.dict.html"><code>dict</code></a> mapping <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>
to <a 
href="http://docs.python.org/library/functions.html#object"><code>object</code></a>)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager.checkState">
    
  </a>
  <a name="checkState">
    
  </a>
  <div class="functionHeader">
    
    def
    checkState(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-14.0.0/twisted/mail/relaymanager.py#L685" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Check the state of the relay queue and, if possible, launch relayers to 
handle waiting messages.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">No return value if no further messages can be relayed or a deferred which 
fires when all of the SMTP connections initiated by this call have 
disconnected. (type: <a 
href="http://docs.python.org/library/types.html#types.NoneType"><code>NoneType</code></a>
or <a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a>)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager._checkStateMX">
    
  </a>
  <a name="_checkStateMX">
    
  </a>
  <div class="functionHeader">
    
    def
    _checkStateMX(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-14.0.0/twisted/mail/relaymanager.py#L704" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager._cbExchange">
    
  </a>
  <a name="_cbExchange">
    
  </a>
  <div class="functionHeader">
    
    def
    _cbExchange(self, address, port, factory):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-14.0.0/twisted/mail/relaymanager.py#L743" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Initiate a connection with a mail exchange server.</p>
<p>This callback function runs after mail exchange server for the domain 
has been looked up.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">address</td><td>The hostname of a mail exchange server. (type: <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>)</td></tr><tr><td></td><td class="fieldArg">port</td><td>A port number. (type: <a 
href="http://docs.python.org/library/functions.html#int"><code>int</code></a>)</td></tr><tr><td></td><td class="fieldArg">factory</td><td>A factory which can create a relayer for the mail exchange server. (type: <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html"><code>SMTPManagedRelayerFactory</code></a>)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.mail.relaymanager.SmartHostSMTPRelayingManager._ebExchange">
    
  </a>
  <a name="_ebExchange">
    
  </a>
  <div class="functionHeader">
    
    def
    _ebExchange(self, failure, factory, domain):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-14.0.0/twisted/mail/relaymanager.py#L764" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Set up to resend messages later.</p>
<p>This errback function runs when no mail exchange server for the domain 
can be found.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">failure</td><td>The reason the mail exchange lookup failed. (type: <a href="twisted.python.failure.Failure.html"><code>Failure</code></a>)</td></tr><tr><td></td><td class="fieldArg">factory</td><td>A factory which can create a relayer for the mail exchange server. (type: <a 
href="twisted.mail.relaymanager.SMTPManagedRelayerFactory.html"><code>SMTPManagedRelayerFactory</code></a>)</td></tr><tr><td></td><td class="fieldArg">domain</td><td>A domain. (type: <a 
href="http://docs.python.org/library/functions.html#bytes"><code>bytes</code></a>)</td></tr></table></div>
  </div>
</div>
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://twistedmatrix.com/">Twisted</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2014-05-12 18:27:00.
    </address>

    <!-- Google analytics, obviously. -->
    <script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
    <script type="text/javascript">
      _uacct = "UA-99018-6";
      urchinTracker();
    </script>

    <!-- If the documentation isn't current, insert a current link. -->
    <script type="text/javascript">
      if (window.location.pathname.indexOf('/current/') == -1) {
          <!-- Give the user a link to this page, but in the current version of the docs. -->
          var link = document.getElementById('current-docs-link');
          link.href = window.location.pathname.replace(/\/\d+\.\d+\.\d+\/api\//, '/current/api/');
          <!-- And make it visible -->
          var container = document.getElementById('current-docs-container');
          container.style.display = "";
          delete link;
          delete container;
      }
    </script>

  </body>
</html>