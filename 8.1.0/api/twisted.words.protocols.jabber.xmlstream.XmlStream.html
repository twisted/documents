<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>twisted.words.protocols.jabber.xmlstream.XmlStream : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>

    <span style="display: none" id="current-docs-container">
      <em>
        <a id="current-docs-link">
          Go to the latest version of this document.
        </a>
      </em>
    </span>

    <h1 class="class">t.w.p.j.x.XmlStream(<a href="twisted.words.xish.xmlstream.XmlStream.html">xmlstream.XmlStream</a>) : class documentation</h1>
    <p>
      <span id="part">Part of <a href="twisted.html">twisted</a>.<a href="twisted.words.html">words</a>.<a href="twisted.words.protocols.html">protocols</a>.<a href="twisted.words.protocols.jabber.html">jabber</a>.<a href="twisted.words.protocols.jabber.xmlstream.html">xmlstream</a></span>
      <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L437">View Source</a>
      <a href="classIndex.html#twisted.words.protocols.jabber.xmlstream.XmlStream">View In Hierarchy</a>
    </p>
    <div>
      
    </div>
    <div>XMPP XML Stream protocol handler.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Instance Variables</td><td class="fieldArg">version</td><td>XML stream version as a tuple (major, minor). Initially, this is set to 
the minimally supported version. Upon receiving the stream header of the 
peer, it is set to the minimum of that value and the version on the 
received header.
 (type: (<code>int</code>, <code>int</code>)
)</td></tr><tr><td></td><td class="fieldArg">namespace</td><td>default namespace URI for stream
 (type: <code>str</code>
)</td></tr><tr><td></td><td class="fieldArg">thisEntity</td><td>JID of this entity
 (type: <a 
href="twisted.words.protocols.jabber.jid.JID.html"><code>JID</code></a>
)</td></tr><tr><td></td><td class="fieldArg">otherEntity</td><td>JID of the peer entity
 (type: <a 
href="twisted.words.protocols.jabber.jid.JID.html"><code>JID</code></a>
)</td></tr><tr><td></td><td class="fieldArg">sid</td><td>session identifier
 (type: <code>str</code>
)</td></tr><tr><td></td><td class="fieldArg">initiating</td><td>True if this is the initiating stream
 (type: <code>bool</code>
)</td></tr><tr><td></td><td class="fieldArg">features</td><td>map of (uri, name) to stream features element received from the 
receiving entity.
 (type: <a href="twisted.protocols.dict.html"><code>dict</code></a> of 
(<code>str</code>, <code>str</code>) to <a 
href="twisted.words.xish.domish.Element.html"><code>domish.Element</code></a>.
)</td></tr><tr><td></td><td class="fieldArg">prefixes</td><td>map of URI to prefixes that are to appear on stream header.
 (type: <a href="twisted.protocols.dict.html"><code>dict</code></a> of 
<code>str</code> to <code>str</code>
)</td></tr><tr><td></td><td class="fieldArg">initializers</td><td>list of stream initializer objects
 (type: <code>list</code> of objects that provide <a 
href="twisted.words.protocols.jabber.ijabber.IInitializer.html"><code>IInitializer</code></a>
)</td></tr><tr><td></td><td class="fieldArg">authenticator</td><td>associated authenticator that uses <code>initializers</code> to 
initialize the XML stream.
</td></tr></table></div>

    
    
    <div id="splitTables">
      <table class="children sortable" id="id1259">
  
  
<tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#__init__">__init__</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#reset">reset</a></td>
    <td><span>Reset XML Stream.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#onStreamError">onStreamError</a></td>
    <td><span>Called when a stream:error element has been received.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#sendHeader">sendHeader</a></td>
    <td><span>Send stream header.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#sendFooter">sendFooter</a></td>
    <td><span>Send stream footer.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#sendStreamError">sendStreamError</a></td>
    <td><span>Send stream level error.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#send">send</a></td>
    <td><span>Send data over the stream.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#connectionMade">connectionMade</a></td>
    <td><span>Called when a connection is made.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#onDocumentStart">onDocumentStart</a></td>
    <td><span>Called when the stream header has been received.
</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.words.protocols.jabber.xmlstream.XmlStream.html#_callLater">_callLater</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
  
</table>
      
        <p>
          Inherited from <a href="twisted.words.xish.xmlstream.XmlStream.html">XmlStream</a>:
        </p>
        <table class="children sortable" id="id1260">
  
  
<tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.xmlstream.XmlStream.html#dataReceived">dataReceived</a></td>
    <td><span>Called whenever data is received.
</span></td>
  </tr><tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.xmlstream.XmlStream.html#connectionLost">connectionLost</a></td>
    <td><span>Called when the connection is shut down.
</span></td>
  </tr><tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.xmlstream.XmlStream.html#onElement">onElement</a></td>
    <td><span>Called whenever a direct child element of the root element has been 
received.
</span></td>
  </tr><tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.xmlstream.XmlStream.html#onDocumentEnd">onDocumentEnd</a></td>
    <td><span>Called whenever the end tag of the root element has been received.
</span></td>
  </tr><tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.xmlstream.XmlStream.html#setDispatchFn">setDispatchFn</a></td>
    <td><span>Set another function to handle elements.
</span></td>
  </tr><tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.xmlstream.XmlStream.html#resetDispatchFn">resetDispatchFn</a></td>
    <td><span>Set the default function (<code>onElement</code>) to handle 
elements.
</span></td>
  </tr><tr class="basemethod private">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.xmlstream.XmlStream.html#_initializeStream">_initializeStream</a></td>
    <td><span>Sets up XML Parser.
</span></td>
  </tr>
  
</table>
      
        <p>
          Inherited from <a href="twisted.internet.protocol.BaseProtocol.html">BaseProtocol</a> (via <a href="twisted.words.xish.xmlstream.XmlStream.html">XmlStream</a>, <a href="twisted.internet.protocol.Protocol.html">Protocol</a>):
        </p>
        <table class="children sortable" id="id1261">
  
  
<tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.internet.protocol.BaseProtocol.html#makeConnection">makeConnection</a></td>
    <td><span>Make a connection to a transport and a server.
</span></td>
  </tr>
  
</table>
      
        <p>
          Inherited from <a href="twisted.words.xish.utility.EventDispatcher.html">EventDispatcher</a> (via <a href="twisted.words.xish.xmlstream.XmlStream.html">XmlStream</a>):
        </p>
        <table class="children sortable" id="id1262">
  
  
<tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.utility.EventDispatcher.html#addOnetimeObserver">addOnetimeObserver</a></td>
    <td><span>Register a one-time observer for an event.
</span></td>
  </tr><tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.utility.EventDispatcher.html#addObserver">addObserver</a></td>
    <td><span>Register an observer for an event.
</span></td>
  </tr><tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.utility.EventDispatcher.html#removeObserver">removeObserver</a></td>
    <td><span>Remove callable as observer for an event.
</span></td>
  </tr><tr class="basemethod">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.utility.EventDispatcher.html#dispatch">dispatch</a></td>
    <td><span>Dispatch an event.
</span></td>
  </tr><tr class="basemethod private">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.utility.EventDispatcher.html#_getEventAndObservers">_getEventAndObservers</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod private">
    
    
    <td>Method</td>
    <td><a href="twisted.words.xish.utility.EventDispatcher.html#_addObserver">_addObserver</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    

    <div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    def
    __init__(self, authenticator):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L478" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    <div class="interfaceinfo">overrides <a href="twisted.words.xish.xmlstream.XmlStream.html#__init__">twisted.words.xish.xmlstream.XmlStream.__init__</a></div>
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream._callLater">
    
  </a>
  <a name="_callLater">
    
  </a>
  <div class="functionHeader">
    
    def
    _callLater(self, *args, **kwargs):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L490" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.reset">
    
  </a>
  <a name="reset">
    
  </a>
  <div class="functionHeader">
    
    def
    reset(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L495" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Reset XML Stream.</p>
Resets the XML Parser for incoming data. This is to be used after 
successfully negotiating a new layer, e.g. TLS and SASL. Note that 
registered event observers will continue to be in place.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.onStreamError">
    
  </a>
  <a name="onStreamError">
    
  </a>
  <div class="functionHeader">
    
    def
    onStreamError(self, errelem):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L507" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Called when a stream:error element has been received.</p>
Dispatches a <code>STREAM_ERROR_EVENT</code> event with the error 
element to allow for cleanup actions and drops the connection.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">errelem</td><td>The received error element.
 (type: <a 
href="twisted.words.xish.domish.Element.html"><code>domish.Element</code></a>
)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.sendHeader">
    
  </a>
  <a name="sendHeader">
    
  </a>
  <div class="functionHeader">
    
    def
    sendHeader(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L522" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Send stream header.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.sendFooter">
    
  </a>
  <a name="sendFooter">
    
  </a>
  <div class="functionHeader">
    
    def
    sendFooter(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L551" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Send stream footer.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.sendStreamError">
    
  </a>
  <a name="sendStreamError">
    
  </a>
  <div class="functionHeader">
    
    def
    sendStreamError(self, streamError):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L558" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Send stream level error.</p>
<p>If we are the receiving entity, and haven't sent the header yet, we sent
one first.</p>
After sending the stream error, the stream is closed and the transport 
connection dropped.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">streamError</td><td>stream error instance
 (type: <a 
href="twisted.words.protocols.jabber.error.StreamError.html"><code>error.StreamError</code></a>
)</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.send">
    
  </a>
  <a name="send">
    
  </a>
  <div class="functionHeader">
    
    def
    send(self, obj):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L581" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    <div class="interfaceinfo">overrides <a href="twisted.words.xish.xmlstream.XmlStream.html#send">twisted.words.xish.xmlstream.XmlStream.send</a></div>
    <div><p>Send data over the stream.</p>
This overrides <code>xmlstream.Xmlstream.send</code> to use the default 
namespace of the stream header when serializing <a 
href="twisted.words.xish.domish.IElement.html"><code>domish.IElement</code></a>s.
It is assumed that if you pass an object that provides <a 
href="twisted.words.xish.domish.IElement.html"><code>domish.IElement</code></a>,
it represents a direct child of the stream's root element.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.connectionMade">
    
  </a>
  <a name="connectionMade">
    
  </a>
  <div class="functionHeader">
    
    def
    connectionMade(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L598" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    <div class="interfaceinfo">from <a href="twisted.internet.interfaces.IProtocol.html#connectionMade">twisted.internet.interfaces.IProtocol</a></div><div class="interfaceinfo">overrides <a href="twisted.words.xish.xmlstream.XmlStream.html#connectionMade">twisted.words.xish.xmlstream.XmlStream.connectionMade</a></div>
    <div><p>Called when a connection is made.</p>
Notifies the authenticator when a connection has been made.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.words.protocols.jabber.xmlstream.XmlStream.onDocumentStart">
    
  </a>
  <a name="onDocumentStart">
    
  </a>
  <div class="functionHeader">
    
    def
    onDocumentStart(self, rootElement):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/words/protocols/jabber/xmlstream.py#L608" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    <div class="interfaceinfo">overrides <a href="twisted.words.xish.xmlstream.XmlStream.html#onDocumentStart">twisted.words.xish.xmlstream.XmlStream.onDocumentStart</a></div>
    <div><p>Called when the stream header has been received.</p>
<p>Extracts the header's <code>id</code> and <code>version</code> 
attributes from the root element. The <code>id</code> attribute is stored 
in our <code>sid</code> attribute and the <code>version</code> attribute is
parsed and the minimum of the version we sent and the parsed 
<code>version</code> attribute is stored as a tuple (major, minor) in this 
class' <code>version</code> attribute. If no <code>version</code> attribute
was present, we assume version 0.0.</p>
<p>If appropriate (we are the initiating stream and the minimum of our and 
the other party's version is at least 1.0), a one-time observer is 
registered for getting the stream features. The registered function is 
<code>onFeatures</code>.</p>
Ultimately, the authenticator's <code>streamStarted</code> method will 
be called.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">rootElement</td><td>The root element.
 (type: <a 
href="twisted.words.xish.domish.Element.html"><code>domish.Element</code></a>
)</td></tr></table></div>
  </div>
</div>
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://twistedmatrix.com/">Twisted</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2011-10-27 15:57:47.
    </address>

    <!-- Google analytics, obviously. -->
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
    <script type="text/javascript">
      _uacct = "UA-99018-6";
      urchinTracker();
    </script>

    <!-- If the documentation isn't current, insert a current link. -->
    <script type="text/javascript">
      if (window.location.pathname.indexOf('/current/') == -1) {
          <!-- Give the user a link to this page, but in the current version of the docs. -->
          var link = document.getElementById('current-docs-link');
          link.href = window.location.pathname.replace(/\/\d+\.\d+\.\d+\/api\//, '/current/api/');
          <!-- And make it visible -->
          var container = document.getElementById('current-docs-container');
          container.style.display = "";
          delete link;
          delete container;
      }
    </script>

  </body>
</html>