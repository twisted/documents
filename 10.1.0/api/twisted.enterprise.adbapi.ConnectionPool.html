<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>twisted.enterprise.adbapi.ConnectionPool : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>

    <span style="display: none" id="current-docs-container">
      <em>
        <a id="current-docs-link">
          Go to the latest version of this document.
        </a>
      </em>
    </span>

    <h1 class="class">t.e.a.ConnectionPool : class documentation</h1>
    <p>
      <span id="part">Part of <a href="twisted.html">twisted</a>.<a href="twisted.enterprise.html">enterprise</a>.<a href="twisted.enterprise.adbapi.html">adbapi</a></span>
      <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L128">View Source</a>
      <a href="classIndex.html#twisted.enterprise.adbapi.ConnectionPool">View In Hierarchy</a>
    </p>
    <div>
      
    </div>
    <div>Represent a pool of connections to a DB-API 2.0 compliant database.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Instance Variables</td><td class="fieldArg">connectionFactory</td><td>factory for connections, default to <a 
href="twisted.enterprise.adbapi.Connection.html"><code>Connection</code></a>.
 (type: any callable.
)</td></tr><tr><td></td><td class="fieldArg">transactionFactory</td><td>factory for transactions, default to <a 
href="twisted.enterprise.adbapi.Transaction.html"><code>Transaction</code></a>.
 (type: any callable
)</td></tr></table></div>

    
    
    <div id="splitTables">
      <table class="children sortable" id="id9">
  
  
<tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#__init__">__init__</a></td>
    <td><span>Create a new ConnectionPool.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#start">start</a></td>
    <td><span>Start the connection pool.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#runWithConnection">runWithConnection</a></td>
    <td><span>Execute a function with a database connection and return the result.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#runInteraction">runInteraction</a></td>
    <td><span>Interact with the database and return the result.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#runQuery">runQuery</a></td>
    <td><span>Execute an SQL query and return the result.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#runOperation">runOperation</a></td>
    <td><span>Execute an SQL query and return None.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#close">close</a></td>
    <td><span>Close all pool connections and shutdown the pool.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#finalClose">finalClose</a></td>
    <td><span>This should only be called by the shutdown trigger.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#connect">connect</a></td>
    <td><span>Return a database connection when one becomes available.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#disconnect">disconnect</a></td>
    <td><span>Disconnect a database connection associated with this pool.
</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#__getstate__">__getstate__</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#__setstate__">__setstate__</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#_start">_start</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#_runWithConnection">_runWithConnection</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#_close">_close</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#_runInteraction">_runInteraction</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#_runQuery">_runQuery</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="twisted.enterprise.adbapi.ConnectionPool.html#_runOperation">_runOperation</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    

    <div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    def
    __init__(self, dbapiName, *connargs, **connkw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L154" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Create a new ConnectionPool.</p>
Any positional or keyword arguments other than those documented here are
passed to the DB-API object when connecting. Use these arguments to pass 
database names, usernames, passwords, etc.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">dbapiName</td><td>an import string to use to obtain a DB-API compatible module (e.g. 
'pyPgSQL.PgSQL')
</td></tr><tr><td></td><td class="fieldArg">cp_min</td><td>the minimum number of connections in pool (default 3)
</td></tr><tr><td></td><td class="fieldArg">cp_max</td><td>the maximum number of connections in pool (default 5)
</td></tr><tr><td></td><td class="fieldArg">cp_noisy</td><td>generate informational log messages during operation (default False)
</td></tr><tr><td></td><td class="fieldArg">cp_openfun</td><td>a callback invoked after every connect() on the underlying DB-API 
object. The callback is passed a new DB-API connection object.  This 
callback can setup per-connection state such as charset, timezone, etc.
</td></tr><tr><td></td><td class="fieldArg">cp_reconnect</td><td>detect connections which have failed and reconnect (default False). 
Failed connections may result in ConnectionLost exceptions, which indicate 
the query may need to be re-sent.
</td></tr><tr><td></td><td class="fieldArg">cp_good_sql</td><td>an sql query which should always succeed and change no state (default 
'select 1')
</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool._start">
    
  </a>
  <a name="_start">
    
  </a>
  <div class="functionHeader">
    
    def
    _start(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L219" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.start">
    
  </a>
  <a name="start">
    
  </a>
  <div class="functionHeader">
    
    def
    start(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L223" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Start the connection pool.</p>
If you are using the reactor normally, this function does *not* need to 
be called.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.runWithConnection">
    
  </a>
  <a name="runWithConnection">
    
  </a>
  <div class="functionHeader">
    
    def
    runWithConnection(self, func, *args, **kw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L239" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Execute a function with a database connection and return the result.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">func</td><td>A callable object of one argument which will be executed in a thread 
with a connection from the pool.  It will be passed as its first argument a
<a 
href="twisted.enterprise.adbapi.Connection.html"><code>Connection</code></a>
instance (whose interface is mostly identical to that of a connection 
object for your DB-API module of choice), and its results will be returned 
as a Deferred. If the method raises an exception the transaction will be 
rolled back.  Otherwise, the transaction will be committed.  <b>Note</b> 
that this function is <b>not</b> run in the main thread: it must be 
threadsafe.
</td></tr><tr><td></td><td class="fieldArg">*args</td><td>positional arguments to be passed to func
</td></tr><tr><td></td><td class="fieldArg">**kw</td><td>keyword arguments to be passed to func
</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">a Deferred which will fire the return value of 
<code>func(Transaction(...), *args, **kw)</code>, or a Failure.
</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool._runWithConnection">
    
  </a>
  <a name="_runWithConnection">
    
  </a>
  <div class="functionHeader">
    
    def
    _runWithConnection(self, func, *args, **kw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L266" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.runInteraction">
    
  </a>
  <a name="runInteraction">
    
  </a>
  <div class="functionHeader">
    
    def
    runInteraction(self, interaction, *args, **kw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L281" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Interact with the database and return the result.</p>
<p>The 'interaction' is a callable object which will be executed in a 
thread using a pooled connection. It will be passed an <a 
href="twisted.enterprise.adbapi.Transaction.html"><code>Transaction</code></a>
object as an argument (whose interface is identical to that of the database
cursor for your DB-API module of choice), and its results will be returned 
as a Deferred. If running the method raises an exception, the transaction 
will be rolled back. If the method returns a value, the transaction will be
committed.</p>
NOTE that the function you pass is *not* run in the main thread: you may
have to worry about thread-safety in the function you pass to this if it 
tries to use non-local objects.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">interaction</td><td>a callable object whose first argument is an <a 
href="twisted.enterprise.adbapi.Transaction.html"><code>adbapi.Transaction</code></a>.
</td></tr><tr><td></td><td class="fieldArg">*args</td><td>additional positional arguments to be passed to interaction
</td></tr><tr><td></td><td class="fieldArg">**kw</td><td>keyword arguments to be passed to interaction
</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">a Deferred which will fire the return value of 
'interaction(Transaction(...), *args, **kw)', or a Failure.
</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.runQuery">
    
  </a>
  <a name="runQuery">
    
  </a>
  <div class="functionHeader">
    
    def
    runQuery(self, *args, **kw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L316" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Execute an SQL query and return the result.</p>
<p>A DB-API cursor will will be invoked with cursor.execute(*args, **kw). 
The exact nature of the arguments will depend on the specific flavor of 
DB-API being used, but the first argument in *args be an SQL statement. The
result of a subsequent cursor.fetchall() will be fired to the Deferred 
which is returned. If either the 'execute' or 'fetchall' methods raise an 
exception, the transaction will be rolled back and a Failure returned.</p>
The  *args and **kw arguments will be passed to the DB-API cursor's 
'execute' method.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">a Deferred which will fire the return value of a DB-API cursor's 
'fetchall' method, or a Failure.
</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.runOperation">
    
  </a>
  <a name="runOperation">
    
  </a>
  <div class="functionHeader">
    
    def
    runOperation(self, *args, **kw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L336" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Execute an SQL query and return None.</p>
<p>A DB-API cursor will will be invoked with cursor.execute(*args, **kw). 
The exact nature of the arguments will depend on the specific flavor of 
DB-API being used, but the first argument in *args will be an SQL 
statement. This method will not attempt to fetch any results from the query
and is thus suitable for INSERT, DELETE, and other SQL statements which do 
not return values. If the 'execute' method raises an exception, the 
transaction will be rolled back and a Failure returned.</p>
<p>The args and kw arguments will be passed to the DB-API cursor's 
'execute' method.</p>
return: a Deferred which will fire None or a Failure.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.close">
    
  </a>
  <a name="close">
    
  </a>
  <div class="functionHeader">
    
    def
    close(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L355" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>Close all pool connections and shutdown the pool.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.finalClose">
    
  </a>
  <a name="finalClose">
    
  </a>
  <div class="functionHeader">
    
    def
    finalClose(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L367" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div>This should only be called by the shutdown trigger.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.connect">
    
  </a>
  <a name="connect">
    
  </a>
  <div class="functionHeader">
    
    def
    connect(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L377" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Return a database connection when one becomes available.</p>
This method blocks and should be run in a thread from the internal 
threadpool. Don't call this method directly from non-threaded code. Using 
this method outside the external threadpool may exceed the maximum number 
of connections in the pool.
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">a database connection from the pool.
</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.disconnect">
    
  </a>
  <a name="disconnect">
    
  </a>
  <div class="functionHeader">
    
    def
    disconnect(self, conn):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L401" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div><p>Disconnect a database connection associated with this pool.</p>
Note: This function should only be used by the same thread which called 
connect(). As with connect(), this function is not used in normal 
non-threaded twisted code.
<table class="fieldTable"></table></div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool._close">
    
  </a>
  <a name="_close">
    
  </a>
  <div class="functionHeader">
    
    def
    _close(self, conn):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L416" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool._runInteraction">
    
  </a>
  <a name="_runInteraction">
    
  </a>
  <div class="functionHeader">
    
    def
    _runInteraction(self, interaction, *args, **kw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L425" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool._runQuery">
    
  </a>
  <a name="_runQuery">
    
  </a>
  <div class="functionHeader">
    
    def
    _runQuery(self, trans, *args, **kw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L442" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool._runOperation">
    
  </a>
  <a name="_runOperation">
    
  </a>
  <div class="functionHeader">
    
    def
    _runOperation(self, trans, *args, **kw):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L446" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.__getstate__">
    
  </a>
  <a name="__getstate__">
    
  </a>
  <div class="functionHeader">
    
    def
    __getstate__(self):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L449" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="twisted.enterprise.adbapi.ConnectionPool.__setstate__">
    
  </a>
  <a name="__setstate__">
    
  </a>
  <div class="functionHeader">
    
    def
    __setstate__(self, state):
    <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.1.0/twisted/enterprise/adbapi.py#L459" class="functionSourceLink">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div>
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://twistedmatrix.com/">Twisted</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2011-10-27 16:17:34.
    </address>

    <!-- Google analytics, obviously. -->
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
    <script type="text/javascript">
      _uacct = "UA-99018-6";
      urchinTracker();
    </script>

    <!-- If the documentation isn't current, insert a current link. -->
    <script type="text/javascript">
      if (window.location.pathname.indexOf('/current/') == -1) {
          <!-- Give the user a link to this page, but in the current version of the docs. -->
          var link = document.getElementById('current-docs-link');
          link.href = window.location.pathname.replace(/\/\d+\.\d+\.\d+\/api\//, '/current/api/');
          <!-- And make it visible -->
          var container = document.getElementById('current-docs-container');
          container.style.display = "";
          delete link;
          delete container;
      }
    </script>

  </body>
</html>