<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>twisted.trial.util : API documentation</title>

    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link type="text/css" href="bootstrap.min.css" rel="stylesheet" />
    <link type="text/css" href="apidocs.css" rel="stylesheet" />
  </head>
  <body>

    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="navbar-brand">
            Twisted API Documentation
          </a>
        </div>
      </div>
    </nav>

   <div id="current-docs-container" style="display: none" class="container">
      <div class="col-sm-12">
        <a id="current-docs-link">
          Go to the latest version of this document.
        </a>
      </div>
    </div>

    <div id="showPrivate">
      <button onclick="togglePrivate()" class="btn btn-link">Toggle Private API</button>
    </div>

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code>twisted.trial.util</code> <small>module documentation</small></h1>

        <span id="partOf">
          Part of <code><a href="twisted.html" data-type="Package" class="code">twisted</a>.<a href="twisted.trial.html" data-type="Package" class="code">trial</a></code>
          <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py">View Source</a>
          
        </span>
      </div>

      <div class="extrasDocstring">
        
      </div>

      <div class="moduleDocstring">
        <div><p>A collection of utility functions and classes, used internally by 
Trial.</p>
<p>This code is for Trial's internal use.  Do NOT use this code if you are 
writing tests.  It is subject to change at the Trial maintainer's whim.  
There is nothing here in this module for you to use unless you are 
maintaining Trial.</p>
<p>Any non-Trial Twisted code that uses this module will be shot.</p>
<p>Maintainer: Jonathan Lange</p><table class="fieldTable"></table></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id3171">
  
  <tr class="variable">
    
    <td>Variable</td>
    <td><a href="twisted.trial.util.html#DEFAULT_TIMEOUT_DURATION" data-type="Variable" class="code">DEFAULT_TIMEOUT_DURATION</a></td>
    <td>The default timeout which will be applied to asynchronous (ie, 
Deferred-returning) test methods, in seconds.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><a href="twisted.trial.util.DirtyReactorAggregateError.html" data-type="Class" class="code">DirtyReactorAggregateError</a></td>
    <td><span>Passed to <a href="twisted.trial.itrial.IReporter.html#addError"><code>twisted.trial.itrial.IReporter.addError</code></a>
when the reactor is left in an unclean state after a test.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><a href="twisted.trial.util.html#acquireAttribute" data-type="Function" class="code">acquireAttribute</a></td>
    <td><span>Go through the list 'objects' sequentially until we find one which has 
attribute 'attr', then return the value of that attribute.  If not found, 
return 'default' if set, otherwise, raise AttributeError.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><a href="twisted.trial.util.html#excInfoOrFailureToExcInfo" data-type="Function" class="code">excInfoOrFailureToExcInfo</a></td>
    <td><span>Coerce a Failure to an _exc_info, if err is a Failure.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><a href="twisted.trial.util.html#suppress" data-type="Function" class="code">suppress</a></td>
    <td><span>Sets up the .suppress tuple properly, pass options to this method as you
would the stdlib warnings.filterwarnings()</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><a href="twisted.trial.util.html#profiled" data-type="Function" class="code">profiled</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><a href="twisted.trial.util._Janitor.html" data-type="Class" class="code">_Janitor</a></td>
    <td><span>The guy that cleans up after you.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><a href="twisted.trial.util.html#_runSequentially" data-type="Function" class="code">_runSequentially</a></td>
    <td><span>Run the given callables one after the other. If a callable returns a 
Deferred, wait until it has finished before running the next callable.</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><a href="twisted.trial.util._NoTrialMarker.html" data-type="Class" class="code">_NoTrialMarker</a></td>
    <td><span>No trial marker file could be found.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><a href="twisted.trial.util.html#_removeSafely" data-type="Function" class="code">_removeSafely</a></td>
    <td><span>Safely remove a path, recursively.</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><a href="twisted.trial.util._WorkingDirectoryBusy.html" data-type="Class" class="code">_WorkingDirectoryBusy</a></td>
    <td><span>A working directory was specified to the runner, but another test run is
currently using that directory.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><a href="twisted.trial.util.html#_unusedTestDirectory" data-type="Function" class="code">_unusedTestDirectory</a></td>
    <td><span>Find an unused directory named similarly to <code>base</code>.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><a href="twisted.trial.util.html#_listToPhrase" data-type="Function" class="code">_listToPhrase</a></td>
    <td><span>Produce a string containing each thing in <code>things</code>, separated
by a <code>delimiter</code>, with the last couple being separated by 
<code>finalDelimiter</code></span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basevariable">
  
  <a name="twisted.trial.util.DEFAULT_TIMEOUT_DURATION">
    
  </a>
  <a name="DEFAULT_TIMEOUT_DURATION">
    
  </a>
  <div class="functionHeader">
    DEFAULT_TIMEOUT_DURATION =
  </div>
  <div class="functionBody">
    The default timeout which will be applied to asynchronous (ie, 
Deferred-returning) test methods, in seconds.
  </div>
</div><div class="basefunction">
  
  <a name="twisted.trial.util.acquireAttribute">
    
  </a>
  <a name="acquireAttribute">
    
  </a>
  <div class="functionHeader">
    
    def
    acquireAttribute(objects, attr, default=_DEFAULT):
    <a class="functionSourceLink" href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py#L180">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Go through the list 'objects' sequentially until we find one which has 
attribute 'attr', then return the value of that attribute.  If not found, 
return 'default' if set, otherwise, raise AttributeError.</p><table class="fieldTable"></table></div>
  </div>
</div><div class="basefunction">
  
  <a name="twisted.trial.util.excInfoOrFailureToExcInfo">
    
  </a>
  <a name="excInfoOrFailureToExcInfo">
    
  </a>
  <div class="functionHeader">
    
    def
    excInfoOrFailureToExcInfo(err):
    <a class="functionSourceLink" href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py#L195">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Coerce a Failure to an _exc_info, if err is a Failure.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">err</td><td>Either a tuple such as returned by <a href="http://docs.python.org/library/sys.html#sys.exc_info"><code>sys.exc_info</code></a>
or a <a href="twisted.python.failure.Failure.html"><code>Failure</code></a>
object.</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">A tuple like the one returned by <a href="http://docs.python.org/library/sys.html#sys.exc_info"><code>sys.exc_info</code></a>.
e.g. <code>exception_type, exception_object, traceback_object</code>.</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  <a name="twisted.trial.util.suppress">
    
  </a>
  <a name="suppress">
    
  </a>
  <div class="functionHeader">
    
    def
    suppress(action='ignore', **kwarg):
    <a class="functionSourceLink" href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py#L211">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Sets up the .suppress tuple properly, pass options to this method as you
would the stdlib warnings.filterwarnings()</p>
<p>So, to use this with a .suppress magic attribute you would do the 
following:</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> twisted.trial <span class="py-keyword">import</span> unittest, util
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">import</span> warnings
<span class="py-prompt">&gt;&gt;&gt;</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">class</span> <span class="py-defname">TestFoo</span>(unittest.TestCase):
<span class="py-more">... </span>    <span class="py-keyword">def</span> <span class="py-defname">testFooBar</span>(self):
<span class="py-more">... </span>        warnings.warn(<span class="py-string">"i am deprecated"</span>, DeprecationWarning)
<span class="py-more">... </span>    testFooBar.suppress = [util.suppress(message=<span class="py-string">'i am deprecated'</span>)]
<span class="py-more">...</span>
<span class="py-prompt">&gt;&gt;&gt;</span></pre>
<p>Note that as with the todo and timeout attributes: the module level 
attribute acts as a default for the class attribute which acts as a default
for the method attribute. The suppress attribute can be overridden at any 
level by specifying <code>.suppress = []</code></p><table class="fieldTable"></table></div>
  </div>
</div><div class="basefunction">
  
  <a name="twisted.trial.util.profiled">
    
  </a>
  <a name="profiled">
    
  </a>
  <div class="functionHeader">
    
    def
    profiled(f, outputFile):
    <a class="functionSourceLink" href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py#L240">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="basefunction private">
  
  <a name="twisted.trial.util._runSequentially">
    
  </a>
  <a name="_runSequentially">
    
  </a>
  <div class="functionHeader">
    @defer.inlineCallbacks<br />
    def
    _runSequentially(callables, stopOnFirstError=False):
    <a class="functionSourceLink" href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py#L256">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Run the given callables one after the other. If a callable returns a 
Deferred, wait until it has finished before running the next callable.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">callables</td><td>An iterable of callables that take no parameters.</td></tr><tr><td></td><td class="fieldArg">stopOnFirstError</td><td>If True, then stop running callables as soon as one raises an exception or 
fires an errback. False by default.</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">A <a href="twisted.internet.defer.Deferred.html"><code>Deferred</code></a> 
that fires a list of <code>(flag, value)</code> tuples. Each tuple will be 
either <code>(SUCCESS, &lt;return value&gt;)</code> or <code>(FAILURE, 
&lt;Failure&gt;)</code>.</td></tr></table></div>
  </div>
</div><div class="basefunction private">
  
  <a name="twisted.trial.util._removeSafely">
    
  </a>
  <a name="_removeSafely">
    
  </a>
  <div class="functionHeader">
    
    def
    _removeSafely(path):
    <a class="functionSourceLink" href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py#L294">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Safely remove a path, recursively.</p>
<p>If <code>path</code> does not contain a node named 
<code>_trial_marker</code>, a <a href="twisted.trial.util._NoTrialMarker.html"><code>_NoTrialMarker</code></a>
exception is raised and the path is not removed.</p><table class="fieldTable"></table></div>
  </div>
</div><div class="basefunction private">
  
  <a name="twisted.trial.util._unusedTestDirectory">
    
  </a>
  <a name="_unusedTestDirectory">
    
  </a>
  <div class="functionHeader">
    
    def
    _unusedTestDirectory(base):
    <a class="functionSourceLink" href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py#L329">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Find an unused directory named similarly to <code>base</code>.</p>
<p>Once a directory is found, it will be locked and a marker dropped into 
it to identify it as a trial temporary directory.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">base</td><td>A template path for the discovery process.  If this path exactly cannot be 
used, a path which varies only in a suffix of the basename will be used 
instead. (type: <a href="twisted.python.filepath.FilePath.html"><code>FilePath</code></a>)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">A two-tuple.  The first element is a <a href="twisted.python.filepath.FilePath.html"><code>FilePath</code></a> 
representing the directory which was found and created.  The second element
is a locked <a href="twisted.python.lockfile.FilesystemLock.html"><code>FilesystemLock</code></a>.
Another call to <code>_unusedTestDirectory</code> will not be able to 
reused the same name until the lock is released, either explicitly or by 
this process exiting.</td></tr></table></div>
  </div>
</div><div class="basefunction private">
  
  <a name="twisted.trial.util._listToPhrase">
    
  </a>
  <a name="_listToPhrase">
    
  </a>
  <div class="functionHeader">
    
    def
    _listToPhrase(things, finalDelimiter, delimiter=', '):
    <a class="functionSourceLink" href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-15.4.0/twisted/trial/util.py#L376">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Produce a string containing each thing in <code>things</code>, separated
by a <code>delimiter</code>, with the last couple being separated by 
<code>finalDelimiter</code></p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">things</td><td>The elements of the resulting phrase (type: <a href="http://docs.python.org/library/stdtypes.html#list"><code>list</code></a>
or <a href="http://docs.python.org/library/stdtypes.html#tuple"><code>tuple</code></a>)</td></tr><tr><td></td><td class="fieldArg">finalDelimiter</td><td>What to put between the last two things (typically 'and' or 'or') (type: <a href="http://docs.python.org/library/stdtypes.html#str"><code>str</code></a>)</td></tr><tr><td></td><td class="fieldArg">delimiter</td><td>The separator to use between each thing, not including the last two. Should
typically include a trailing space. (type: <a href="http://docs.python.org/library/stdtypes.html#str"><code>str</code></a>)</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">The resulting phrase (type: <a href="http://docs.python.org/library/stdtypes.html#str"><code>str</code></a>)</td></tr></table></div>
  </div>
</div>

      </div>
      <address>
        <a href="index.html">API Documentation</a> for <a href="http://twistedmatrix.com/">Twisted</a>, generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a> at 2015-09-04 15:29:41.
      </address>

    </div>

    <script type="text/javascript" src="pydoctor.js"></script>

    <!-- Google analytics, obviously. -->
    <script type="text/javascript" src="//www.google-analytics.com/urchin.js"></script>
    <script type="text/javascript">
      _uacct = "UA-99018-6";
      urchinTracker();
    </script>

    <!-- If the documentation isn't current, insert a current link. -->
    <script type="text/javascript">
      if (window.location.pathname.indexOf('/current/') == -1) {
        <!-- Give the user a link to this page, but in the current version of the docs. -->
        var link = document.getElementById('current-docs-link');
        link.href = window.location.pathname.replace(/\/\d+\.\d+\.\d+\/api\//, '/current/api/');
        <!-- And make it visible -->
        var container = document.getElementById('current-docs-container');
        container.style.display = "";
        delete link;
        delete container;
      }
    </script>

  </body>
</html>