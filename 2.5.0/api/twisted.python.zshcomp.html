<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>API docs for &ldquo;twisted.python.zshcomp&rdquo;</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>
    <h1 class="module">Module t.p.zshcomp</h1>
    <p>
      <span id="part">Part of <a href="twisted.html">twisted</a>.<a href="twisted.python.html">python</a></span>
      <a href="http://twistedmatrix.com/trac/browser/trunk/twisted/python/zshcomp.py">View Source</a>
      
    </p>
    <div>
      
    </div>
    <pre>Rebuild the completion functions for the currently active version of Twisted:
    $ python zshcomp.py -i

This module implements a zsh code generator which generates completion code for
commands that use twisted.python.usage. This is the stuff that makes pressing
Tab at the command line work.

API Stability: Unstable

@maintainer: Eric Mangold

To build completion functions for your own commands, and not Twisted commands,
then just do something like this::

    o = mymodule.MyOptions()
    f = file('_mycommand', 'w')
    Builder("mycommand", o, f).write()

Then all you have to do is place the generated file somewhere in your
C{$fpath}, and restart zsh. Note the "site-functions" directory in your
C{$fpath} where you may install 3rd-party completion functions (like the one
you're building). Call C{siteFunctionsPath} to locate this directory
programmatically.

SPECIAL CLASS VARIABLES. You may set these on your usage.Options subclass::

    zsh_altArgDescr
    zsh_multiUse
    zsh_mutuallyExclusive
    zsh_actions
    zsh_actionDescr
    zsh_extras

Here is what they mean (with examples)::

    zsh_altArgDescr = {"foo":"use this description for foo instead"}
        A dict mapping long option names to alternate descriptions.  When this
        variable is present, the descriptions contained here will override
        those descriptions provided in the optFlags and optParameters
        variables.

    zsh_multiUse = ["foo", "bar"]
        A sequence containing those long option names which may appear on the
        command line more than once. By default, options will only be completed
        one time.

    zsh_mutuallyExclusive = [("foo", "bar"), ("bar", "baz")]
        A sequence of sequences, with each sub-sequence containing those long
        option names that are mutually exclusive. That is, those options that
        cannot appear on the command line together.

    zsh_actions = {"foo":'_files -g "*.foo"', "bar":"(one two three)",
            "colors":"_values -s , 'colors to use' red green blue"}
        A dict mapping long option names to Zsh "actions". These actions
        define what will be completed as the argument to the given option.  By
        default, all files/dirs will be completed if no action is given.

        Callables may instead be given for the values in this dict. The
        callable should accept no arguments, and return a string that will be
        used as the zsh "action" in the same way as the literal strings in the
        examples above.

        As you can see in the example above. The "foo" option will have files
        that end in .foo completed when the user presses Tab. The "bar"
        option will have either of the strings "one", "two", or "three"
        completed when the user presses Tab.

        "colors" will allow multiple arguments to be completed, seperated by
        commas. The possible arguments are red, green, and blue. Examples::

            my_command --foo some-file.foo --colors=red,green
            my_command --colors=green
            my_command --colors=green,blue

        Actions may take many forms, and it is beyond the scope of this
        document to illustrate them all. Please refer to the documention for
        the Zsh _arguments function. zshcomp is basically a front-end to Zsh's
        _arguments completion function.

        That documentation is available on the zsh web site at this URL:
        U{http://zsh.sunsite.dk/Doc/Release/zsh_19.html#SEC124}

    zsh_actionDescr = {"logfile":"log file name", "random":"random seed"}
        A dict mapping long option names to a description for the corresponding
        zsh "action". These descriptions are show above the generated matches
        when the user is doing completions for this option.

        Normally Zsh does not show these descriptions unless you have
        "verbose" completion turned on. Turn on verbosity with this in your
        ~/.zshrc::

            zstyle ':completion:*' verbose yes
            zstyle ':completion:*:descriptions' format '%B%d%b'

    zsh_extras = [":file to read from:action", ":file to write to:action"]
        A sequence of extra arguments that will be passed verbatim to Zsh's
        _arguments completion function. The _arguments function does all the
        hard work of doing command line completions. You can see how zshcomp
        invokes the _arguments call by looking at the generated completion
        files that this module creates.

   *** NOTE ***

        You will need to use this variable to describe completions for normal
        command line arguments. That is, those arguments that are not
        associated with an option. That is, the arguments that are given to the
        parseArgs method of your usage.Options subclass.

        In the example above, the 1st non-option argument will be described as
        "file to read from" and completion options will be generated in
        accordance with the "action". (See above about zsh "actions") The
        2nd non-option argument will be described as "file to write to" and
        the action will be interpreted likewise.

        Things you can put here are all documented under the _arguments
        function here: U{http://zsh.sunsite.dk/Doc/Release/zsh_19.html#SEC124}

Zsh Notes:

To enable advanced completion add something like this to your ~/.zshrc::

    autoload -U compinit
    compinit

For some extra verbosity, and general niceness add these lines too::

    zstyle ':completion:*' verbose yes
    zstyle ':completion:*:descriptions' format '%B%d%b'
    zstyle ':completion:*:messages' format '%d'
    zstyle ':completion:*:warnings' format 'No matches for: %d'

Have fun!</pre>
    
    
    <div id="splitTables">
      <table class="children sortable" id="id180">
  
  
  
  
  <tr class="class">
    
    
    <td>Class</td>
    <td><a href="twisted.python.zshcomp.MyOptions.html">MyOptions</a></td>
    <td><span>Options for this file
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="twisted.python.zshcomp.Builder.html">Builder</a></td>
    <td><span class="undocumented">No class docstring; 2/2 methods documented</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="twisted.python.zshcomp.SubcommandBuilder.html">SubcommandBuilder</a></td>
    <td><span>Use this builder for commands that have sub-commands. 
twisted.python.usage
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="twisted.python.zshcomp.MktapBuilder.html">MktapBuilder</a></td>
    <td><span>Builder for the mktap command
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="twisted.python.zshcomp.TwistdBuilder.html">TwistdBuilder</a></td>
    <td><span>Builder for the twistd command
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="twisted.python.zshcomp.ArgumentsGenerator.html">ArgumentsGenerator</a></td>
    <td><span>Generate a call to the zsh _arguments completion function
</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="twisted.python.zshcomp.html#descrFromDoc">descrFromDoc</a></td>
    <td><span>Generate an appropriate description from docstring of the given 
object
</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="twisted.python.zshcomp.html#firstLine">firstLine</a></td>
    <td><span>Return the first line of the given string
</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="twisted.python.zshcomp.html#escape">escape</a></td>
    <td><span>Shell escape the given string
</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="twisted.python.zshcomp.html#siteFunctionsPath">siteFunctionsPath</a></td>
    <td><span>Return the path to the system-wide site-functions directory or
</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="twisted.python.zshcomp.html#makeCompFunctionFiles">makeCompFunctionFiles</a></td>
    <td><span>Generate completion function files in the given directory for all
</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="twisted.python.zshcomp.html#_openCmdFile">_openCmdFile</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="twisted.python.zshcomp.html#run">run</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    
    <div class="function">
        <a name="twisted.python.zshcomp.descrFromDoc"></a>
        <a name="descrFromDoc"></a>
        <div class="functionHeader">
        def descrFromDoc(obj):
        <a href="http://twistedmatrix.com/trac/browser/trunk/twisted/python/zshcomp.py#L632" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div>Generate an appropriate description from docstring of the given 
object
<table class="fieldTable"></table></div>
        </div>
      </div><div class="function">
        <a name="twisted.python.zshcomp.firstLine"></a>
        <a name="firstLine"></a>
        <div class="functionHeader">
        def firstLine(s):
        <a href="http://twistedmatrix.com/trac/browser/trunk/twisted/python/zshcomp.py#L651" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div>Return the first line of the given string
<table class="fieldTable"></table></div>
        </div>
      </div><div class="function">
        <a name="twisted.python.zshcomp.escape"></a>
        <a name="escape"></a>
        <div class="functionHeader">
        def escape(str):
        <a href="http://twistedmatrix.com/trac/browser/trunk/twisted/python/zshcomp.py#L661" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div>Shell escape the given string
<table class="fieldTable"></table></div>
        </div>
      </div><div class="function">
        <a name="twisted.python.zshcomp.siteFunctionsPath"></a>
        <a name="siteFunctionsPath"></a>
        <div class="functionHeader">
        def siteFunctionsPath():
        <a href="http://twistedmatrix.com/trac/browser/trunk/twisted/python/zshcomp.py#L667" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div>Return the path to the system-wide site-functions directory or 
<code>None</code> if it cannot be determined
<table class="fieldTable"></table></div>
        </div>
      </div><div class="function">
        <a name="twisted.python.zshcomp.makeCompFunctionFiles"></a>
        <a name="makeCompFunctionFiles"></a>
        <div class="functionHeader">
        def makeCompFunctionFiles(out_path, generateFor=generateFor, specialBuilders=specialBuilders):
        <a href="http://twistedmatrix.com/trac/browser/trunk/twisted/python/zshcomp.py#L706" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div>Generate completion function files in the given directory for all 
twisted commands
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">out_path</td><td>The path to the directory to generate completion function fils in
(type: <code>str</code>
)</td></tr><tr><td></td><td class="fieldArg">generateFor</td><td>Sequence in the form of the 'generateFor' top-level variable as 
defined in this module. Indicates what commands to build completion files 
for.
</td></tr><tr><td></td><td class="fieldArg">specialBuilders</td><td>Sequence in the form of the 'specialBuilders' top-level variable as 
defined in this module. Indicates what commands require a special Builder 
class.
</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2"><code>list</code> of 2-tuples of the form (cmd_name, error) indicating 
commands that we skipped building completions for. cmd_name is the name 
of the skipped command, and error is the Exception that was raised when 
trying to import the script module. Commands are usually skipped due to a 
missing dependency, e.g. Tkinter.
</td></tr></table></div>
        </div>
      </div><div class="function">
        <a name="twisted.python.zshcomp._openCmdFile"></a>
        <a name="_openCmdFile"></a>
        <div class="functionHeader">
        def _openCmdFile(out_path, cmd_name):
        <a href="http://twistedmatrix.com/trac/browser/trunk/twisted/python/zshcomp.py#L755" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div class="undocumented">Undocumented</div>
        </div>
      </div><div class="function">
        <a name="twisted.python.zshcomp.run"></a>
        <a name="run"></a>
        <div class="functionHeader">
        def run():
        <a href="http://twistedmatrix.com/trac/browser/trunk/twisted/python/zshcomp.py#L758" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div class="undocumented">Undocumented</div>
        </div>
      </div>
    
    <address>
      <a href="index.html">API Documentation</a> for twisted, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a>.
    </address>
  </body>
</html>