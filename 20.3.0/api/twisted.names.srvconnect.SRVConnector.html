<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>twisted.names.srvconnect.SRVConnector : API documentation</title>

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <link rel="stylesheet" href="bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="apidocs.css" type="text/css" />
  </head>
  <body>

    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html">
            Twisted API Documentation
          </a>
        </div>
      </div>
    </nav>

   <div id="current-docs-container" class="container" style="display: none">
      <div class="col-sm-12">
        <a id="current-docs-link">
          Go to the latest version of this document.
        </a>
      </div>
    </div>

    <div id="showPrivate">
      <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
    </div>

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code>twisted.names.srvconnect.SRVConnector</code> <small>class documentation</small></h1>

        <span id="partOf">
          Part of <code><a href="twisted.html" data-type="Package" class="code">twisted</a>.<a href="twisted.names.html" data-type="Package" class="code">names</a>.<a href="twisted.names.srvconnect.html" data-type="Module" class="code">srvconnect</a></code>
          <a href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L41">View Source</a>
          <a href="classIndex.html#twisted.names.srvconnect.SRVConnector">(View In Hierarchy)</a>
        </span>
      </div>

      <div class="extrasDocstring">
        <p>Implements interfaces: <a href="twisted.internet.interfaces.IConnector.html" data-type="Interface" class="code">twisted.internet.interfaces.IConnector</a></p>
      </div>

      

      <div class="moduleDocstring">
        <div><p>A connector that looks up DNS SRV records.</p><p>RFC 2782 details how SRV records should be interpreted and selected for subsequent connection attempts. The algorithm for using the records' priority and weight is implemented in <a href="twisted.names.srvconnect.SRVConnector.html#pickServer"><code>pickServer</code></a>.</p><table class="fieldTable"></table></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id1970">
  
  <tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#servers" data-type="Instance Variable" class="code">servers</a></td>
    <td><span>List of candidate server records for future connection attempts.</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#orderedServers" data-type="Instance Variable" class="code">orderedServers</a></td>
    <td><span>List of server records that have already been tried in this round of connection attempts.</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#stopAfterDNS" data-type="Instance Variable" class="code">stopAfterDNS</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#__init__" data-type="Method" class="code">__init__</a></td>
    <td><span></span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#reactor" data-type="Instance Variable" class="code">reactor</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#service" data-type="Instance Variable" class="code">service</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#domain" data-type="Instance Variable" class="code">domain</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#factory" data-type="Instance Variable" class="code">factory</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#protocol" data-type="Instance Variable" class="code">protocol</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#connectFuncName" data-type="Instance Variable" class="code">connectFuncName</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#connectFuncArgs" data-type="Instance Variable" class="code">connectFuncArgs</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#connectFuncKwArgs" data-type="Instance Variable" class="code">connectFuncKwArgs</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#connector" data-type="Instance Variable" class="code">connector</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#connect" data-type="Method" class="code">connect</a></td>
    <td><span>Start connection to remote server.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#pickServer" data-type="Method" class="code">pickServer</a></td>
    <td><span>Pick the next server.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#stopConnecting" data-type="Method" class="code">stopConnecting</a></td>
    <td><span>Stop attempting to connect.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#disconnect" data-type="Method" class="code">disconnect</a></td>
    <td><span>Disconnect whatever our are state is.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#getDestination" data-type="Method" class="code">getDestination</a></td>
    <td><span>Return destination this will try to connect to.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#connectionFailed" data-type="Method" class="code">connectionFailed</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#connectionLost" data-type="Method" class="code">connectionLost</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#_defaultPort" data-type="Instance Variable" class="code">_defaultPort</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#_ebGotServers" data-type="Method" class="code">_ebGotServers</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#_cbGotServers" data-type="Method" class="code">_cbGotServers</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#_ebServiceUnknown" data-type="Method" class="code">_ebServiceUnknown</a></td>
    <td><span>Connect to the default port when the service name is unknown.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><a href="twisted.names.srvconnect.SRVConnector.html#_reallyConnect" data-type="Method" class="code">_reallyConnect</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.servers">
    
  </a>
  <a name="servers">
    
  </a>
  <div class="functionHeader">
    servers =
  </div>
  <div class="functionBody">
    <div>List of candidate server records for future connection attempts.</div> (type: <a href="http://docs.python.org/library/stdtypes.html#list"><code>list</code></a> of <a href="twisted.names.dns.Record_SRV.html"><code>dns.Record_SRV</code></a>)
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.orderedServers">
    
  </a>
  <a name="orderedServers">
    
  </a>
  <div class="functionHeader">
    orderedServers =
  </div>
  <div class="functionBody">
    <div>List of server records that have already been tried in this round of connection attempts.</div> (type: <a href="http://docs.python.org/library/stdtypes.html#list"><code>list</code></a> of <a href="twisted.names.dns.Record_SRV.html"><code>dns.Record_SRV</code></a>)
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.stopAfterDNS">
    
  </a>
  <a name="stopAfterDNS">
    
  </a>
  <div class="functionHeader">
    stopAfterDNS =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div> (type: <code>int</code>)
  </div>
</div><div class="basemethod">
  
  <a name="twisted.names.srvconnect.SRVConnector.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    def
    __init__(self, reactor, service, domain, factory, protocol="""tcp""", connectFuncName="""connectTCP""", connectFuncArgs=(), connectFuncKwArgs={}, defaultPort=None):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L61">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">domain</td><td>The domain to connect to.  If passed as a text string, it will be encoded using <code>idna</code> encoding. (type: <a href="http://docs.python.org/library/stdtypes.html#bytes"><code>bytes</code></a> or <a href="http://docs.python.org/library/stdtypes.html#str"><code>str</code></a>)</td></tr><tr><td></td><td class="fieldArg">defaultPort</td><td>Optional default port number to be used when SRV lookup fails and the service name is unknown. This should be the port number associated with the service name as defined by the IANA registry. (type: <a href="http://docs.python.org/library/stdtypes.html#int"><code>int</code></a>)</td></tr></table></div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.reactor">
    
  </a>
  <a name="reactor">
    
  </a>
  <div class="functionHeader">
    reactor =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.service">
    
  </a>
  <a name="service">
    
  </a>
  <div class="functionHeader">
    service =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.domain">
    
  </a>
  <a name="domain">
    
  </a>
  <div class="functionHeader">
    domain =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.factory">
    
  </a>
  <a name="factory">
    
  </a>
  <div class="functionHeader">
    factory =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.protocol">
    
  </a>
  <a name="protocol">
    
  </a>
  <div class="functionHeader">
    protocol =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.connectFuncName">
    
  </a>
  <a name="connectFuncName">
    
  </a>
  <div class="functionHeader">
    connectFuncName =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.connectFuncArgs">
    
  </a>
  <a name="connectFuncArgs">
    
  </a>
  <div class="functionHeader">
    connectFuncArgs =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.connectFuncKwArgs">
    
  </a>
  <a name="connectFuncKwArgs">
    
  </a>
  <div class="functionHeader">
    connectFuncKwArgs =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable private">
  
  <a name="twisted.names.srvconnect.SRVConnector._defaultPort">
    
  </a>
  <a name="_defaultPort">
    
  </a>
  <div class="functionHeader">
    _defaultPort =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="twisted.names.srvconnect.SRVConnector.connector">
    
  </a>
  <a name="connector">
    
  </a>
  <div class="functionHeader">
    connector =
  </div>
  <div class="functionBody">
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.names.srvconnect.SRVConnector.connect">
    
  </a>
  <a name="connect">
    
  </a>
  <div class="functionHeader">
    
    def
    connect(self):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L95">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <a href="twisted.internet.interfaces.IConnector.html#connect" data-type="Method" class="code">twisted.internet.interfaces.IConnector</a></div>
    
    <div><p>Start connection to remote server.</p></div>
  </div>
</div><div class="basemethod private">
  
  <a name="twisted.names.srvconnect.SRVConnector._ebGotServers">
    
  </a>
  <a name="_ebGotServers">
    
  </a>
  <div class="functionHeader">
    
    def
    _ebGotServers(self, failure):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L122">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="basemethod private">
  
  <a name="twisted.names.srvconnect.SRVConnector._cbGotServers">
    
  </a>
  <a name="_cbGotServers">
    
  </a>
  <div class="functionHeader">
    
    def
    _cbGotServers(self, result):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L133">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="basemethod private">
  
  <a name="twisted.names.srvconnect.SRVConnector._ebServiceUnknown">
    
  </a>
  <a name="_ebServiceUnknown">
    
  </a>
  <div class="functionHeader">
    
    def
    _ebServiceUnknown(self, failure):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L151">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Connect to the default port when the service name is unknown.</p><p>If no SRV records were found, the service name will be passed as the port. If resolving the name fails with <a href="twisted.internet.error.ServiceNameUnknownError.html"><code>error.ServiceNameUnknownError</code></a>, a final attempt is done using the default port.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.names.srvconnect.SRVConnector.pickServer">
    
  </a>
  <a name="pickServer">
    
  </a>
  <div class="functionHeader">
    
    def
    pickServer(self):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L166">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Pick the next server.</p><p>This selects the next server from the list of SRV records according to their priority and weight values, as set out by the default algorithm specified in RFC 2782.</p><p>At the beginning of a round, <a href="twisted.names.srvconnect.SRVConnector.html#servers"><code>servers</code></a> is populated with <a href="twisted.names.srvconnect.SRVConnector.html#orderedServers"><code>orderedServers</code></a>, and the latter is made empty. <a href="twisted.names.srvconnect.SRVConnector.html#servers"><code>servers</code></a> is the list of candidates, and <a href="twisted.names.srvconnect.SRVConnector.html#orderedServers"><code>orderedServers</code></a> is the list of servers that have already been tried.</p><p>First, all records are ordered by priority and weight in ascending order. Then for each priority level, a running sum is calculated over the sorted list of records for that priority. Then a random value between 0 and the final sum is compared to each record in order. The first record that is greater than or equal to that random value is chosen and removed from the list of candidates for this round.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">A tuple of target hostname and port from the chosen DNS SRV record. (type: <a href="http://docs.python.org/library/stdtypes.html#tuple"><code>tuple</code></a> of native <a href="http://docs.python.org/library/stdtypes.html#str"><code>str</code></a> and <a href="http://docs.python.org/library/stdtypes.html#int"><code>int</code></a>)</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  <a name="twisted.names.srvconnect.SRVConnector._reallyConnect">
    
  </a>
  <a name="_reallyConnect">
    
  </a>
  <div class="functionHeader">
    
    def
    _reallyConnect(self):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L229">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.names.srvconnect.SRVConnector.stopConnecting">
    
  </a>
  <a name="stopConnecting">
    
  </a>
  <div class="functionHeader">
    
    def
    stopConnecting(self):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L245">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <a href="twisted.internet.interfaces.IConnector.html#stopConnecting" data-type="Method" class="code">twisted.internet.interfaces.IConnector</a></div>
    
    <div><p>Stop attempting to connect.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.names.srvconnect.SRVConnector.disconnect">
    
  </a>
  <a name="disconnect">
    
  </a>
  <div class="functionHeader">
    
    def
    disconnect(self):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L253">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <a href="twisted.internet.interfaces.IConnector.html#disconnect" data-type="Method" class="code">twisted.internet.interfaces.IConnector</a></div>
    
    <div><p>Disconnect whatever our are state is.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.names.srvconnect.SRVConnector.getDestination">
    
  </a>
  <a name="getDestination">
    
  </a>
  <div class="functionHeader">
    
    def
    getDestination(self):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L261">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <a href="twisted.internet.interfaces.IConnector.html#getDestination" data-type="Method" class="code">twisted.internet.interfaces.IConnector</a></div>
    
    <div><p>Return destination this will try to connect to.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">An object which provides <a href="twisted.internet.interfaces.IAddress.html"><code>IAddress</code></a>.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.names.srvconnect.SRVConnector.connectionFailed">
    
  </a>
  <a name="connectionFailed">
    
  </a>
  <div class="functionHeader">
    
    def
    connectionFailed(self, reason):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L266">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="basemethod">
  
  <a name="twisted.names.srvconnect.SRVConnector.connectionLost">
    
  </a>
  <a name="connectionLost">
    
  </a>
  <div class="functionHeader">
    
    def
    connectionLost(self, reason):
    <a class="functionSourceLink" href="https://github.com/twisted/twisted/tree/twisted-20.3.0/src/twisted/names/srvconnect.py#L271">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div class="undocumented">Undocumented</div>
  </div>
</div>

      </div>
      <address>
        <a href="index.html">API Documentation</a> for <a href="http://twistedmatrix.com/">Twisted</a>, generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a> at 2020-03-20 23:54:06.
      </address>

    </div>

    <script type="text/javascript" src="pydoctor.js"></script>

    <!-- Google analytics, obviously. -->
    <script type="text/javascript" src="//www.google-analytics.com/urchin.js"></script>
    <script type="text/javascript">
      _uacct = "UA-99018-6";
      urchinTracker();
    </script>

    <!-- If the documentation isn't current, insert a current link. -->
    <script type="text/javascript">
      if (window.location.pathname.indexOf('/current/') == -1) {
        <!-- Give the user a link to this page, but in the current version of the docs. -->
        var link = document.getElementById('current-docs-link');
        link.href = window.location.pathname.replace(/\/\d+\.\d+\.\d+\/api\//, '/current/api/');
        <!-- And make it visible -->
        var container = document.getElementById('current-docs-container');
        container.style.display = "";
        delete link;
        delete container;
      }
    </script>

  </body>
</html>